{"ast":null,"code":"function _classPrivateMethodInitSpec(e, a) {\n  _checkPrivateRedeclaration(e, a), a.add(e);\n}\nfunction _classPrivateFieldInitSpec(e, t, a) {\n  _checkPrivateRedeclaration(e, t), t.set(e, a);\n}\nfunction _checkPrivateRedeclaration(e, t) {\n  if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _classPrivateFieldSet(s, a, r) {\n  return s.set(_assertClassBrand(s, a), r), r;\n}\nfunction _classPrivateFieldGet(s, a) {\n  return s.get(_assertClassBrand(s, a));\n}\nfunction _assertClassBrand(e, t, n) {\n  if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n;\n  throw new TypeError(\"Private element is not present on this object\");\n}\nimport { BasePlugin } from \"../base/index.mjs\";\nimport { arrayEach, arrayMap } from \"../../helpers/array.mjs\";\nimport { toSingleLine } from \"../../helpers/templateLiteralTag.mjs\";\nimport { warn } from \"../../helpers/console.mjs\";\nimport { rangeEach } from \"../../helpers/number.mjs\";\nimport { addClass, removeClass } from \"../../helpers/dom/element.mjs\";\nimport { isKey } from \"../../helpers/unicode.mjs\";\nimport { SEPARATOR } from \"../contextMenu/predefinedItems/index.mjs\";\nimport * as constants from \"../../i18n/constants.mjs\";\nimport { ConditionComponent } from \"./component/condition.mjs\";\nimport { OperatorsComponent } from \"./component/operators.mjs\";\nimport { ValueComponent } from \"./component/value.mjs\";\nimport { ActionBarComponent } from \"./component/actionBar.mjs\";\nimport ConditionCollection from \"./conditionCollection.mjs\";\nimport DataFilter from \"./dataFilter.mjs\";\nimport ConditionUpdateObserver from \"./conditionUpdateObserver.mjs\";\nimport { createArrayAssertion, toEmptyString, unifyColumnValues } from \"./utils.mjs\";\nimport { createMenuFocusController } from \"./menu/focusController.mjs\";\nimport { CONDITION_NONE, CONDITION_BY_VALUE, OPERATION_AND, OPERATION_OR, OPERATION_OR_THEN_VARIABLE } from \"./constants.mjs\";\nimport { TrimmingMap } from \"../../translations/index.mjs\";\nexport const PLUGIN_KEY = 'filters';\nexport const PLUGIN_PRIORITY = 250;\nconst SHORTCUTS_GROUP = PLUGIN_KEY;\n\n/**\n * @plugin Filters\n * @class Filters\n *\n * @description\n * The plugin allows filtering the table data either by the built-in component or with the API.\n *\n * See [the filtering demo](@/guides/columns/column-filter/column-filter.md) for examples.\n *\n * @example\n * ::: only-for javascript\n * ```js\n * const container = document.getElementById('example');\n * const hot = new Handsontable(container, {\n *   data: getData(),\n *   colHeaders: true,\n *   rowHeaders: true,\n *   dropdownMenu: true,\n *   filters: true\n * });\n * ```\n * :::\n *\n * ::: only-for react\n * ```jsx\n * <HotTable\n *   data={getData()}\n *   colHeaders={true}\n *   rowHeaders={true}\n *   dropdownMenu={true}\n *   filters={true}\n * />\n * ```\n * :::\n */\nvar _menuFocusNavigator = /*#__PURE__*/new WeakMap();\nvar _Filters_brand = /*#__PURE__*/new WeakSet();\nexport class Filters extends BasePlugin {\n  static get PLUGIN_KEY() {\n    return PLUGIN_KEY;\n  }\n  static get PLUGIN_PRIORITY() {\n    return PLUGIN_PRIORITY;\n  }\n  static get PLUGIN_DEPS() {\n    return ['plugin:DropdownMenu', 'plugin:HiddenRows', 'cell-type:checkbox'];\n  }\n\n  /**\n   * Instance of {@link DropdownMenu}.\n   *\n   * @private\n   * @type {DropdownMenu}\n   */\n\n  constructor(hotInstance) {\n    super(hotInstance);\n    // One listener for the enable/disable functionality\n    /**\n     * `afterChange` listener.\n     *\n     * @param {Array} changes Array of changes.\n     */\n    _classPrivateMethodInitSpec(this, _Filters_brand);\n    _defineProperty(this, \"dropdownMenuPlugin\", null);\n    /**\n     * Instance of {@link ConditionCollection}.\n     *\n     * @private\n     * @type {ConditionCollection}\n     */\n    _defineProperty(this, \"conditionCollection\", null);\n    /**\n     * Instance of {@link ConditionUpdateObserver}.\n     *\n     * @private\n     * @type {ConditionUpdateObserver}\n     */\n    _defineProperty(this, \"conditionUpdateObserver\", null);\n    /**\n     * Map, where key is component identifier and value represent `BaseComponent` element or it derivatives.\n     *\n     * @private\n     * @type {Map}\n     */\n    _defineProperty(this, \"components\", new Map([['filter_by_condition', null], ['filter_operators', null], ['filter_by_condition2', null], ['filter_by_value', null], ['filter_action_bar', null]]));\n    /**\n     * Map of skipped rows by plugin.\n     *\n     * @private\n     * @type {null|TrimmingMap}\n     */\n    _defineProperty(this, \"filtersRowsMap\", null);\n    /**\n     * Menu focus navigator allows switching the focus position through Tab and Shift Tab keys.\n     *\n     * @type {MenuFocusNavigator|undefined}\n     */\n    _classPrivateFieldInitSpec(this, _menuFocusNavigator, void 0);\n    this.hot.addHook('afterGetColHeader', (col, TH) => _assertClassBrand(_Filters_brand, this, _onAfterGetColHeader).call(this, col, TH));\n  }\n\n  /**\n   * Checks if the plugin is enabled in the handsontable settings. This method is executed in {@link Hooks#beforeInit}\n   * hook and if it returns `true` then the {@link Filters#enablePlugin} method is called.\n   *\n   * @returns {boolean}\n   */\n  isEnabled() {\n    /* eslint-disable no-unneeded-ternary */\n    return this.hot.getSettings()[PLUGIN_KEY] ? true : false;\n  }\n\n  /**\n   * Enables the plugin functionality for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n    this.filtersRowsMap = this.hot.rowIndexMapper.registerMap(this.pluginName, new TrimmingMap());\n    this.dropdownMenuPlugin = this.hot.getPlugin('dropdownMenu');\n    const dropdownSettings = this.hot.getSettings().dropdownMenu;\n    const menuContainer = dropdownSettings && dropdownSettings.uiContainer || this.hot.rootDocument.body;\n    const addConfirmationHooks = component => {\n      component.addLocalHook('accept', () => _assertClassBrand(_Filters_brand, this, _onActionBarSubmit).call(this, 'accept'));\n      component.addLocalHook('cancel', () => _assertClassBrand(_Filters_brand, this, _onActionBarSubmit).call(this, 'cancel'));\n      component.addLocalHook('change', command => _assertClassBrand(_Filters_brand, this, _onComponentChange).call(this, component, command));\n      return component;\n    };\n    const filterByConditionLabel = () => `${this.hot.getTranslatedPhrase(constants.FILTERS_DIVS_FILTER_BY_CONDITION)}:`;\n    const filterValueLabel = () => `${this.hot.getTranslatedPhrase(constants.FILTERS_DIVS_FILTER_BY_VALUE)}:`;\n    if (!this.components.get('filter_by_condition')) {\n      const conditionComponent = new ConditionComponent(this.hot, {\n        id: 'filter_by_condition',\n        name: filterByConditionLabel,\n        addSeparator: false,\n        menuContainer\n      });\n      conditionComponent.addLocalHook('afterClose', () => _assertClassBrand(_Filters_brand, this, _onSelectUIClosed).call(this));\n      this.components.set('filter_by_condition', addConfirmationHooks(conditionComponent));\n    }\n    if (!this.components.get('filter_operators')) {\n      this.components.set('filter_operators', new OperatorsComponent(this.hot, {\n        id: 'filter_operators',\n        name: 'Operators'\n      }));\n    }\n    if (!this.components.get('filter_by_condition2')) {\n      const conditionComponent = new ConditionComponent(this.hot, {\n        id: 'filter_by_condition2',\n        name: '',\n        addSeparator: true,\n        menuContainer\n      });\n      conditionComponent.addLocalHook('afterClose', () => _assertClassBrand(_Filters_brand, this, _onSelectUIClosed).call(this));\n      this.components.set('filter_by_condition2', addConfirmationHooks(conditionComponent));\n    }\n    if (!this.components.get('filter_by_value')) {\n      this.components.set('filter_by_value', addConfirmationHooks(new ValueComponent(this.hot, {\n        id: 'filter_by_value',\n        name: filterValueLabel\n      })));\n    }\n    if (!this.components.get('filter_action_bar')) {\n      this.components.set('filter_action_bar', addConfirmationHooks(new ActionBarComponent(this.hot, {\n        id: 'filter_action_bar',\n        name: 'Action bar'\n      })));\n    }\n    if (!this.conditionCollection) {\n      this.conditionCollection = new ConditionCollection(this.hot);\n    }\n    if (!this.conditionUpdateObserver) {\n      this.conditionUpdateObserver = new ConditionUpdateObserver(this.hot, this.conditionCollection, physicalColumn => this.getDataMapAtColumn(physicalColumn));\n      this.conditionUpdateObserver.addLocalHook('update', conditionState => _assertClassBrand(_Filters_brand, this, _updateComponents).call(this, conditionState));\n    }\n    this.components.forEach(component => component.show());\n    this.addHook('afterDropdownMenuDefaultOptions', defaultOptions => _assertClassBrand(_Filters_brand, this, _onAfterDropdownMenuDefaultOptions).call(this, defaultOptions));\n    this.addHook('afterDropdownMenuShow', () => _assertClassBrand(_Filters_brand, this, _onAfterDropdownMenuShow).call(this));\n    this.addHook('afterDropdownMenuHide', () => _assertClassBrand(_Filters_brand, this, _onAfterDropdownMenuHide).call(this));\n    this.addHook('afterChange', changes => _assertClassBrand(_Filters_brand, this, _onAfterChange).call(this, changes));\n\n    // Temp. solution (extending menu items bug in contextMenu/dropdownMenu)\n    if (this.hot.getSettings().dropdownMenu && this.dropdownMenuPlugin) {\n      this.dropdownMenuPlugin.disablePlugin();\n      this.dropdownMenuPlugin.enablePlugin();\n    }\n    if (!_classPrivateFieldGet(_menuFocusNavigator, this) && this.dropdownMenuPlugin.enabled) {\n      const mainMenu = this.dropdownMenuPlugin.menu;\n      const focusableItems = [\n      // A fake menu item that once focused allows escaping from the focus navigation (using Tab keys)\n      // to the menu navigation using arrow keys.\n      {\n        focus: () => {\n          const menuNavigator = mainMenu.getNavigator();\n          const lastSelectedMenuItem = _classPrivateFieldGet(_menuFocusNavigator, this).getLastMenuPage();\n          mainMenu.focus();\n          if (lastSelectedMenuItem > 0) {\n            menuNavigator.setCurrentPage(lastSelectedMenuItem);\n          } else {\n            menuNavigator.toFirstItem();\n          }\n        }\n      }, ...Array.from(this.components).map(_ref => {\n        let [, component] = _ref;\n        return component.getElements();\n      }).flat()];\n      _classPrivateFieldSet(_menuFocusNavigator, this, createMenuFocusController(mainMenu, focusableItems));\n      const forwardToFocusNavigation = event => {\n        _classPrivateFieldGet(_menuFocusNavigator, this).listen();\n        event.preventDefault();\n        if (isKey(event.keyCode, 'TAB')) {\n          if (event.shiftKey) {\n            _classPrivateFieldGet(_menuFocusNavigator, this).toPreviousItem();\n          } else {\n            _classPrivateFieldGet(_menuFocusNavigator, this).toNextItem();\n          }\n        }\n      };\n      this.components.get('filter_by_value').addLocalHook('listTabKeydown', forwardToFocusNavigation);\n      this.components.get('filter_by_condition').addLocalHook('selectTabKeydown', forwardToFocusNavigation);\n    }\n    this.registerShortcuts();\n    super.enablePlugin();\n  }\n\n  /**\n   * Disables the plugin functionality for this Handsontable instance.\n   */\n  disablePlugin() {\n    if (this.enabled) {\n      var _this$dropdownMenuPlu;\n      if ((_this$dropdownMenuPlu = this.dropdownMenuPlugin) !== null && _this$dropdownMenuPlu !== void 0 && _this$dropdownMenuPlu.enabled) {\n        this.dropdownMenuPlugin.menu.clearLocalHooks();\n      }\n      this.components.forEach((component, key) => {\n        component.destroy();\n        this.components.set(key, null);\n      });\n      this.conditionCollection.destroy();\n      this.conditionCollection = null;\n      this.hot.rowIndexMapper.unregisterMap(this.pluginName);\n    }\n    this.unregisterShortcuts();\n    super.disablePlugin();\n  }\n\n  /**\n   * Register shortcuts responsible for clearing the filters.\n   *\n   * @private\n   */\n  registerShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').addShortcut({\n      keys: [['Alt', 'A']],\n      stopPropagation: true,\n      callback: () => {\n        const selection = this.hot.getSelected();\n        this.clearConditions();\n        this.filter();\n        if (selection) {\n          this.hot.selectCells(selection);\n        }\n      },\n      group: SHORTCUTS_GROUP\n    });\n  }\n\n  /**\n   * Unregister shortcuts responsible for clearing the filters.\n   *\n   * @private\n   */\n  unregisterShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').removeShortcutsByGroup(SHORTCUTS_GROUP);\n  }\n\n  /* eslint-disable jsdoc/require-description-complete-sentence */\n  /**\n   * @memberof Filters#\n   * @function addCondition\n   * @description\n   * Adds condition to the conditions collection at specified column index.\n   *\n   * Possible predefined conditions:\n   *  * `begins_with` - Begins with\n   *  * `between` - Between\n   *  * `by_value` - By value\n   *  * `contains` - Contains\n   *  * `date_after` - After a date\n   *  * `date_before` - Before a date\n   *  * `date_today` - Today\n   *  * `date_tomorrow` - Tomorrow\n   *  * `date_yesterday` - Yesterday\n   *  * `empty` - Empty\n   *  * `ends_with` - Ends with\n   *  * `eq` - Equal\n   *  * `gt` - Greater than\n   *  * `gte` - Greater than or equal\n   *  * `lt` - Less than\n   *  * `lte` - Less than or equal\n   *  * `none` - None (no filter)\n   *  * `not_between` - Not between\n   *  * `not_contains` - Not contains\n   *  * `not_empty` - Not empty\n   *  * `neq` - Not equal.\n   *\n   * Possible operations on collection of conditions:\n   *  * `conjunction` - [**Conjunction**](https://en.wikipedia.org/wiki/Logical_conjunction) on conditions collection (by default), i.e. for such operation: <br/> c1 AND c2 AND c3 AND c4 ... AND cn === TRUE, where c1 ... cn are conditions.\n   *  * `disjunction` - [**Disjunction**](https://en.wikipedia.org/wiki/Logical_disjunction) on conditions collection, i.e. for such operation: <br/> c1 OR c2 OR c3 OR c4 ... OR cn === TRUE, where c1, c2, c3, c4 ... cn are conditions.\n   *  * `disjunctionWithExtraCondition` - **Disjunction** on first `n - 1`\\* conditions from collection with an extra requirement computed from the last condition, i.e. for such operation: <br/> c1 OR c2 OR c3 OR c4 ... OR cn-1 AND cn === TRUE, where c1, c2, c3, c4 ... cn are conditions.\n   *\n   * \\* when `n` is collection size; it's used i.e. for one operation introduced from UI (when choosing from filter's drop-down menu two conditions with OR operator between them, mixed with choosing values from the multiple choice select)\n   *\n   * **Note**: Mind that you cannot mix different types of operations (for instance, if you use `conjunction`, use it consequently for a particular column).\n   *\n   * @example\n   * ::: only-for javascript\n   * ```js\n   * const container = document.getElementById('example');\n   * const hot = new Handsontable(container, {\n   *   data: getData(),\n   *   filters: true\n   * });\n   *\n   * // access to filters plugin instance\n   * const filtersPlugin = hot.getPlugin('filters');\n   *\n   * // add filter \"Greater than\" 95 to column at index 1\n   * filtersPlugin.addCondition(1, 'gt', [95]);\n   * filtersPlugin.filter();\n   *\n   * // add filter \"By value\" to column at index 1\n   * // in this case all value's that don't match will be filtered.\n   * filtersPlugin.addCondition(1, 'by_value', [['ing', 'ed', 'as', 'on']]);\n   * filtersPlugin.filter();\n   *\n   * // add filter \"Begins with\" with value \"de\" AND \"Not contains\" with value \"ing\"\n   * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'conjunction');\n   * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'conjunction');\n   * filtersPlugin.filter();\n   *\n   * // add filter \"Begins with\" with value \"de\" OR \"Not contains\" with value \"ing\"\n   * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'disjunction');\n   * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'disjunction');\n   * filtersPlugin.filter();\n   * ```\n   * :::\n   *\n   * ::: only-for react\n   * ```jsx\n   * const hotRef = useRef(null);\n   *\n   * ...\n   *\n   * <HotTable\n   *   ref={hotRef}\n   *   data={getData()}\n   *   filters={true}\n   * />\n   *\n   * // access to filters plugin instance\n   * const hot = hotRef.current.hotInstance;\n   * const filtersPlugin = hot.getPlugin('filters');\n   *\n   * // add filter \"Greater than\" 95 to column at index 1\n   * filtersPlugin.addCondition(1, 'gt', [95]);\n   * filtersPlugin.filter();\n   *\n   * // add filter \"By value\" to column at index 1\n   * // in this case all value's that don't match will be filtered.\n   * filtersPlugin.addCondition(1, 'by_value', [['ing', 'ed', 'as', 'on']]);\n   * filtersPlugin.filter();\n   *\n   * // add filter \"Begins with\" with value \"de\" AND \"Not contains\" with value \"ing\"\n   * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'conjunction');\n   * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'conjunction');\n   * filtersPlugin.filter();\n   *\n   * // add filter \"Begins with\" with value \"de\" OR \"Not contains\" with value \"ing\"\n   * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'disjunction');\n   * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'disjunction');\n   * filtersPlugin.filter();\n   * ```\n   * :::\n   *\n   * @param {number} column Visual column index.\n   * @param {string} name Condition short name.\n   * @param {Array} args Condition arguments.\n   * @param {string} [operationId=conjunction] `id` of operation which is performed on the column.\n   */\n  /* eslint-enable jsdoc/require-description-complete-sentence */\n  addCondition(column, name, args) {\n    let operationId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : OPERATION_AND;\n    const physicalColumn = this.hot.toPhysicalColumn(column);\n    this.conditionCollection.addCondition(physicalColumn, {\n      command: {\n        key: name\n      },\n      args\n    }, operationId);\n  }\n\n  /**\n   * Removes conditions at specified column index.\n   *\n   * @param {number} column Visual column index.\n   */\n  removeConditions(column) {\n    const physicalColumn = this.hot.toPhysicalColumn(column);\n    this.conditionCollection.removeConditions(physicalColumn);\n  }\n\n  /**\n   * Clears all conditions previously added to the collection for the specified column index or, if the column index\n   * was not passed, clear the conditions for all columns.\n   *\n   * @param {number} [column] Visual column index.\n   */\n  clearConditions(column) {\n    if (column === undefined) {\n      this.conditionCollection.clean();\n    } else {\n      const physicalColumn = this.hot.toPhysicalColumn(column);\n      this.conditionCollection.removeConditions(physicalColumn);\n    }\n  }\n\n  /**\n   * Filters data based on added filter conditions.\n   *\n   * @fires Hooks#beforeFilter\n   * @fires Hooks#afterFilter\n   */\n  filter() {\n    const {\n      navigableHeaders\n    } = this.hot.getSettings();\n    const dataFilter = this._createDataFilter();\n    const needToFilter = !this.conditionCollection.isEmpty();\n    let visibleVisualRows = [];\n    const conditions = this.conditionCollection.exportAllConditions();\n    const allowFiltering = this.hot.runHooks('beforeFilter', conditions, this.conditionCollection.previousConditionStack);\n    if (allowFiltering !== false) {\n      if (needToFilter) {\n        const trimmedRows = [];\n        this.hot.batchExecution(() => {\n          this.filtersRowsMap.clear();\n          visibleVisualRows = arrayMap(dataFilter.filter(), rowData => rowData.meta.visualRow);\n          const visibleVisualRowsAssertion = createArrayAssertion(visibleVisualRows);\n          rangeEach(this.hot.countSourceRows() - 1, row => {\n            if (!visibleVisualRowsAssertion(row)) {\n              trimmedRows.push(row);\n            }\n          });\n          arrayEach(trimmedRows, physicalRow => {\n            this.filtersRowsMap.setValueAtIndex(physicalRow, true);\n          });\n        }, true);\n        if (!navigableHeaders && !visibleVisualRows.length) {\n          this.hot.deselectCell();\n        }\n      } else {\n        this.filtersRowsMap.clear();\n      }\n    }\n    this.hot.runHooks('afterFilter', conditions);\n    this.conditionCollection.setPreviousConditionStack(null);\n    this.hot.view.adjustElementsSize();\n    this.hot.render();\n    if (this.hot.selection.isSelected()) {\n      this.hot.selectCell(navigableHeaders ? -1 : 0, this.hot.getSelectedRangeLast().highlight.col);\n    }\n  }\n\n  /**\n   * Gets last selected column index.\n   *\n   * @returns {{visualIndex: number, physicalIndex: number} | null} Returns `null` when a column is\n   * not selected. Otherwise, returns an object with `visualIndex` and `physicalIndex` properties containing\n   * the index of the column.\n   */\n  getSelectedColumn() {\n    var _this$hot$getSelected;\n    const highlight = (_this$hot$getSelected = this.hot.getSelectedRangeLast()) === null || _this$hot$getSelected === void 0 ? void 0 : _this$hot$getSelected.highlight;\n    if (!highlight) {\n      return null;\n    }\n    return {\n      visualIndex: highlight.col,\n      physicalIndex: this.hot.toPhysicalColumn(highlight.col)\n    };\n  }\n\n  /**\n   * Returns handsontable source data with cell meta based on current selection.\n   *\n   * @param {number} [column] The physical column index. By default column index accept the value of the selected column.\n   * @returns {Array} Returns array of objects where keys as row index.\n   */\n  getDataMapAtColumn(column) {\n    const visualColumn = this.hot.toVisualColumn(column);\n    const data = [];\n    arrayEach(this.hot.getSourceDataAtCol(visualColumn), (value, rowIndex) => {\n      var _this$hot$getDataAtCe;\n      const {\n        row,\n        col,\n        visualCol,\n        visualRow,\n        type,\n        instance,\n        dateFormat,\n        locale\n      } = this.hot.getCellMeta(rowIndex, visualColumn);\n      const dataValue = (_this$hot$getDataAtCe = this.hot.getDataAtCell(this.hot.toVisualRow(rowIndex), visualColumn)) !== null && _this$hot$getDataAtCe !== void 0 ? _this$hot$getDataAtCe : value;\n      data.push({\n        meta: {\n          row,\n          col,\n          visualCol,\n          visualRow,\n          type,\n          instance,\n          dateFormat,\n          locale\n        },\n        value: toEmptyString(dataValue)\n      });\n    });\n    return data;\n  }\n  /**\n   * Update the condition of ValueComponent, based on the handled changes.\n   *\n   * @private\n   * @param {number} columnIndex Column index of handled ValueComponent condition.\n   */\n  updateValueComponentCondition(columnIndex) {\n    const dataAtCol = this.hot.getDataAtCol(columnIndex);\n    const selectedValues = unifyColumnValues(dataAtCol);\n    this.conditionUpdateObserver.updateStatesAtColumn(columnIndex, selectedValues);\n  }\n\n  /**\n   * Restores components to its saved state.\n   *\n   * @private\n   * @param {Array} components List of components.\n   */\n  restoreComponents(components) {\n    var _this$getSelectedColu;\n    const physicalIndex = (_this$getSelectedColu = this.getSelectedColumn()) === null || _this$getSelectedColu === void 0 ? void 0 : _this$getSelectedColu.physicalIndex;\n    components.forEach(component => {\n      if (component.isHidden()) {\n        return;\n      }\n      component.restoreState(physicalIndex);\n    });\n    this.updateDependentComponentsVisibility();\n  }\n\n  /**\n   * After dropdown menu show listener.\n   */\n\n  /**\n   * Get an operation, based on the number and types of arguments (where arguments are states of components).\n   *\n   * @param {string} suggestedOperation Operation which was chosen by user from UI.\n   * @param {object} byConditionState1 State of first condition component.\n   * @param {object} byConditionState2 State of second condition component.\n   * @param {object} byValueState State of value component.\n   * @private\n   * @returns {string}\n   */\n  getOperationBasedOnArguments(suggestedOperation, byConditionState1, byConditionState2, byValueState) {\n    let operation = suggestedOperation;\n    if (operation === OPERATION_OR && byConditionState1.command.key !== CONDITION_NONE && byConditionState2.command.key !== CONDITION_NONE && byValueState.command.key !== CONDITION_NONE) {\n      operation = OPERATION_OR_THEN_VARIABLE;\n    } else if (byValueState.command.key !== CONDITION_NONE) {\n      if (byConditionState1.command.key === CONDITION_NONE || byConditionState2.command.key === CONDITION_NONE) {\n        operation = OPERATION_AND;\n      }\n    }\n    return operation;\n  }\n\n  /**\n   * On action bar submit listener.\n   *\n   * @private\n   * @param {string} submitType The submit type.\n   */\n\n  /**\n   * Listen to the keyboard input on document body and forward events to instance of Handsontable\n   * created by DropdownMenu plugin.\n   *\n   * @private\n   */\n  setListeningDropdownMenu() {\n    if (this.dropdownMenuPlugin) {\n      this.dropdownMenuPlugin.setListening();\n    }\n  }\n\n  /**\n   * Updates visibility of some of the components, based on the state of the parent component.\n   *\n   * @private\n   */\n  updateDependentComponentsVisibility() {\n    const component = this.components.get('filter_by_condition');\n    const {\n      command\n    } = component.getState();\n    const componentsToShow = [this.components.get('filter_by_condition2'), this.components.get('filter_operators')];\n    if (command.showOperators) {\n      this.showComponents(...componentsToShow);\n    } else {\n      this.hideComponents(...componentsToShow);\n    }\n  }\n\n  /**\n   * On after get column header listener.\n   *\n   * @param {number} col Visual column index.\n   * @param {HTMLTableCellElement} TH Header's TH element.\n   */\n\n  /**\n   * Creates DataFilter instance based on condition collection.\n   *\n   * @private\n   * @param {ConditionCollection} conditionCollection Condition collection object.\n   * @returns {DataFilter}\n   */\n  _createDataFilter() {\n    let conditionCollection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.conditionCollection;\n    return new DataFilter(conditionCollection, physicalColumn => this.getDataMapAtColumn(physicalColumn));\n  }\n\n  /**\n   * It updates the components state. The state is triggered by ConditionUpdateObserver, which\n   * reacts to any condition added to the condition collection. It may be added through the UI\n   * components or by API call.\n   *\n   * @param {object} conditionsState An object with the state generated by UI components.\n   */\n\n  /**\n   * Returns indexes of passed components inside list of `dropdownMenu` items.\n   *\n   * @private\n   * @param {...BaseComponent} components List of components.\n   * @returns {Array}\n   */\n  getIndexesOfComponents() {\n    const indexes = [];\n    if (!this.dropdownMenuPlugin) {\n      return indexes;\n    }\n    const menu = this.dropdownMenuPlugin.menu;\n    for (var _len = arguments.length, components = new Array(_len), _key = 0; _key < _len; _key++) {\n      components[_key] = arguments[_key];\n    }\n    arrayEach(components, component => {\n      arrayEach(menu.menuItems, (item, index) => {\n        if (item.key === component.getMenuItemDescriptor().key) {\n          indexes.push(index);\n        }\n      });\n    });\n    return indexes;\n  }\n\n  /**\n   * Changes visibility of component.\n   *\n   * @private\n   * @param {boolean} visible Determine if components should be visible.\n   * @param {...BaseComponent} components List of components.\n   */\n  changeComponentsVisibility() {\n    let visible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (!this.dropdownMenuPlugin) {\n      return;\n    }\n    const menu = this.dropdownMenuPlugin.menu;\n    const hotMenu = menu.hotMenu;\n    const hiddenRows = hotMenu.getPlugin('hiddenRows');\n    for (var _len2 = arguments.length, components = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      components[_key2 - 1] = arguments[_key2];\n    }\n    const indexes = this.getIndexesOfComponents(...components);\n    if (visible) {\n      hiddenRows.showRows(indexes);\n    } else {\n      hiddenRows.hideRows(indexes);\n    }\n    hotMenu.render();\n  }\n\n  /**\n   * Hides components of filters `dropdownMenu`.\n   *\n   * @private\n   * @param {...BaseComponent} components List of components.\n   */\n  hideComponents() {\n    for (var _len3 = arguments.length, components = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      components[_key3] = arguments[_key3];\n    }\n    this.changeComponentsVisibility(false, ...components);\n  }\n\n  /**\n   * Shows components of filters `dropdownMenu`.\n   *\n   * @private\n   * @param {...BaseComponent} components List of components.\n   */\n  showComponents() {\n    for (var _len4 = arguments.length, components = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      components[_key4] = arguments[_key4];\n    }\n    this.changeComponentsVisibility(true, ...components);\n  }\n\n  /**\n   * Destroys the plugin instance.\n   */\n  destroy() {\n    if (this.enabled) {\n      this.components.forEach((component, key) => {\n        if (component !== null) {\n          component.destroy();\n          this.components.set(key, null);\n        }\n      });\n      this.conditionCollection.destroy();\n      this.conditionUpdateObserver.destroy();\n      this.hot.rowIndexMapper.unregisterMap(this.pluginName);\n    }\n    super.destroy();\n  }\n}\nfunction _onAfterChange(changes) {\n  if (changes) {\n    arrayEach(changes, change => {\n      const [, prop] = change;\n      const columnIndex = this.hot.propToCol(prop);\n      if (this.conditionCollection.hasConditions(columnIndex)) {\n        this.updateValueComponentCondition(columnIndex);\n      }\n    });\n  }\n}\nfunction _onAfterDropdownMenuShow() {\n  const menu = this.dropdownMenuPlugin.menu;\n  this.restoreComponents(Array.from(this.components.values()));\n  menu.updateMenuDimensions();\n}\n/**\n * After dropdown menu hide listener.\n */\nfunction _onAfterDropdownMenuHide() {\n  this.components.get('filter_by_condition').getSelectElement().closeOptions();\n  this.components.get('filter_by_condition2').getSelectElement().closeOptions();\n}\n/**\n * After dropdown menu default options listener.\n *\n * @param {object} defaultOptions ContextMenu default item options.\n */\nfunction _onAfterDropdownMenuDefaultOptions(defaultOptions) {\n  defaultOptions.items.push({\n    name: SEPARATOR\n  });\n  this.components.forEach(component => {\n    defaultOptions.items.push(component.getMenuItemDescriptor());\n  });\n}\nfunction _onActionBarSubmit(submitType) {\n  var _this$dropdownMenuPlu3;\n  if (submitType === 'accept') {\n    const selectedColumn = this.getSelectedColumn();\n    if (selectedColumn === null) {\n      var _this$dropdownMenuPlu2;\n      (_this$dropdownMenuPlu2 = this.dropdownMenuPlugin) === null || _this$dropdownMenuPlu2 === void 0 || _this$dropdownMenuPlu2.close();\n      return;\n    }\n    const {\n      physicalIndex\n    } = selectedColumn;\n    const byConditionState1 = this.components.get('filter_by_condition').getState();\n    const byConditionState2 = this.components.get('filter_by_condition2').getState();\n    const byValueState = this.components.get('filter_by_value').getState();\n    const operation = this.getOperationBasedOnArguments(this.components.get('filter_operators').getActiveOperationId(), byConditionState1, byConditionState2, byValueState);\n    this.conditionUpdateObserver.groupChanges();\n    let columnStackPosition = this.conditionCollection.getColumnStackPosition(physicalIndex);\n    if (columnStackPosition === -1) {\n      columnStackPosition = undefined;\n    }\n    this.conditionCollection.removeConditions(physicalIndex);\n    if (byConditionState1.command.key !== CONDITION_NONE) {\n      this.conditionCollection.addCondition(physicalIndex, byConditionState1, operation, columnStackPosition);\n      if (byConditionState2.command.key !== CONDITION_NONE) {\n        this.conditionCollection.addCondition(physicalIndex, byConditionState2, operation, columnStackPosition);\n      }\n    }\n    if (byValueState.command.key !== CONDITION_NONE) {\n      this.conditionCollection.addCondition(physicalIndex, byValueState, operation, columnStackPosition);\n    }\n    this.conditionUpdateObserver.flush();\n    this.components.forEach(component => component.saveState(physicalIndex));\n    this.filtersRowsMap.clear();\n    this.filter();\n  }\n  (_this$dropdownMenuPlu3 = this.dropdownMenuPlugin) === null || _this$dropdownMenuPlu3 === void 0 || _this$dropdownMenuPlu3.close();\n}\n/**\n * On component change listener.\n *\n * @param {BaseComponent} component Component inheriting BaseComponent.\n * @param {object} command Menu item object (command).\n */\nfunction _onComponentChange(component, command) {\n  this.updateDependentComponentsVisibility();\n  if (component.constructor === ConditionComponent && !command.inputsCount) {\n    this.setListeningDropdownMenu();\n  }\n}\n/**\n * On component SelectUI closed listener.\n */\nfunction _onSelectUIClosed() {\n  this.setListeningDropdownMenu();\n}\nfunction _onAfterGetColHeader(col, TH) {\n  const physicalColumn = this.hot.toPhysicalColumn(col);\n  if (this.enabled && this.conditionCollection.hasConditions(physicalColumn)) {\n    addClass(TH, 'htFiltersActive');\n  } else {\n    removeClass(TH, 'htFiltersActive');\n  }\n}\nfunction _updateComponents(conditionsState) {\n  var _this$dropdownMenuPlu4;\n  if (!((_this$dropdownMenuPlu4 = this.dropdownMenuPlugin) !== null && _this$dropdownMenuPlu4 !== void 0 && _this$dropdownMenuPlu4.enabled)) {\n    return;\n  }\n  const {\n    editedConditionStack: {\n      conditions,\n      column\n    }\n  } = conditionsState;\n  const conditionsByValue = conditions.filter(condition => condition.name === CONDITION_BY_VALUE);\n  const conditionsWithoutByValue = conditions.filter(condition => condition.name !== CONDITION_BY_VALUE);\n  if (conditionsByValue.length >= 2 || conditionsWithoutByValue.length >= 3) {\n    warn(toSingleLine`The filter conditions have been applied properly, but couldn’t be displayed visually.\\x20\n        The overall amount of conditions exceed the capability of the dropdown menu.\\x20\n        For more details see the documentation.`);\n  } else {\n    const operationType = this.conditionCollection.getOperation(column);\n    this.components.get('filter_by_condition').updateState(conditionsWithoutByValue[0], column);\n    this.components.get('filter_by_condition2').updateState(conditionsWithoutByValue[1], column);\n    this.components.get('filter_operators').updateState(operationType, column);\n    this.components.get('filter_by_value').updateState(conditionsState);\n  }\n}","map":{"version":3,"names":["_classPrivateMethodInitSpec","e","a","_checkPrivateRedeclaration","add","_classPrivateFieldInitSpec","t","set","has","TypeError","_defineProperty","r","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","String","Number","_classPrivateFieldSet","s","_assertClassBrand","_classPrivateFieldGet","get","n","arguments","length","BasePlugin","arrayEach","arrayMap","toSingleLine","warn","rangeEach","addClass","removeClass","isKey","SEPARATOR","constants","ConditionComponent","OperatorsComponent","ValueComponent","ActionBarComponent","ConditionCollection","DataFilter","ConditionUpdateObserver","createArrayAssertion","toEmptyString","unifyColumnValues","createMenuFocusController","CONDITION_NONE","CONDITION_BY_VALUE","OPERATION_AND","OPERATION_OR","OPERATION_OR_THEN_VARIABLE","TrimmingMap","PLUGIN_KEY","PLUGIN_PRIORITY","SHORTCUTS_GROUP","_menuFocusNavigator","WeakMap","_Filters_brand","WeakSet","Filters","PLUGIN_DEPS","constructor","hotInstance","Map","hot","addHook","col","TH","_onAfterGetColHeader","isEnabled","getSettings","enablePlugin","enabled","filtersRowsMap","rowIndexMapper","registerMap","pluginName","dropdownMenuPlugin","getPlugin","dropdownSettings","dropdownMenu","menuContainer","uiContainer","rootDocument","body","addConfirmationHooks","component","addLocalHook","_onActionBarSubmit","command","_onComponentChange","filterByConditionLabel","getTranslatedPhrase","FILTERS_DIVS_FILTER_BY_CONDITION","filterValueLabel","FILTERS_DIVS_FILTER_BY_VALUE","components","conditionComponent","id","name","addSeparator","_onSelectUIClosed","conditionCollection","conditionUpdateObserver","physicalColumn","getDataMapAtColumn","conditionState","_updateComponents","forEach","show","defaultOptions","_onAfterDropdownMenuDefaultOptions","_onAfterDropdownMenuShow","_onAfterDropdownMenuHide","changes","_onAfterChange","disablePlugin","mainMenu","menu","focusableItems","focus","menuNavigator","getNavigator","lastSelectedMenuItem","getLastMenuPage","setCurrentPage","toFirstItem","Array","from","map","_ref","getElements","flat","forwardToFocusNavigation","event","listen","preventDefault","keyCode","shiftKey","toPreviousItem","toNextItem","registerShortcuts","_this$dropdownMenuPlu","clearLocalHooks","key","destroy","unregisterMap","unregisterShortcuts","getShortcutManager","getContext","addShortcut","keys","stopPropagation","callback","selection","getSelected","clearConditions","filter","selectCells","group","removeShortcutsByGroup","addCondition","column","args","operationId","undefined","toPhysicalColumn","removeConditions","clean","navigableHeaders","dataFilter","_createDataFilter","needToFilter","isEmpty","visibleVisualRows","conditions","exportAllConditions","allowFiltering","runHooks","previousConditionStack","trimmedRows","batchExecution","clear","rowData","meta","visualRow","visibleVisualRowsAssertion","countSourceRows","row","push","physicalRow","setValueAtIndex","deselectCell","setPreviousConditionStack","view","adjustElementsSize","render","isSelected","selectCell","getSelectedRangeLast","highlight","getSelectedColumn","_this$hot$getSelected","visualIndex","physicalIndex","visualColumn","toVisualColumn","data","getSourceDataAtCol","rowIndex","_this$hot$getDataAtCe","visualCol","type","instance","dateFormat","locale","getCellMeta","dataValue","getDataAtCell","toVisualRow","updateValueComponentCondition","columnIndex","dataAtCol","getDataAtCol","selectedValues","updateStatesAtColumn","restoreComponents","_this$getSelectedColu","isHidden","restoreState","updateDependentComponentsVisibility","getOperationBasedOnArguments","suggestedOperation","byConditionState1","byConditionState2","byValueState","operation","setListeningDropdownMenu","setListening","getState","componentsToShow","showOperators","showComponents","hideComponents","getIndexesOfComponents","indexes","_len","_key","menuItems","item","index","getMenuItemDescriptor","changeComponentsVisibility","visible","hotMenu","hiddenRows","_len2","_key2","showRows","hideRows","_len3","_key3","_len4","_key4","change","prop","propToCol","hasConditions","values","updateMenuDimensions","getSelectElement","closeOptions","items","submitType","_this$dropdownMenuPlu3","selectedColumn","_this$dropdownMenuPlu2","close","getActiveOperationId","groupChanges","columnStackPosition","getColumnStackPosition","flush","saveState","inputsCount","conditionsState","_this$dropdownMenuPlu4","editedConditionStack","conditionsByValue","condition","conditionsWithoutByValue","operationType","getOperation","updateState"],"sources":["/Users/priyadeliwala/node_modules/handsontable/plugins/filters/filters.mjs"],"sourcesContent":["import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.unscopables.flat.js\";\nfunction _classPrivateMethodInitSpec(e, a) { _checkPrivateRedeclaration(e, a), a.add(e); }\nfunction _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classPrivateFieldSet(s, a, r) { return s.set(_assertClassBrand(s, a), r), r; }\nfunction _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }\nfunction _assertClassBrand(e, t, n) { if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError(\"Private element is not present on this object\"); }\nimport { BasePlugin } from \"../base/index.mjs\";\nimport { arrayEach, arrayMap } from \"../../helpers/array.mjs\";\nimport { toSingleLine } from \"../../helpers/templateLiteralTag.mjs\";\nimport { warn } from \"../../helpers/console.mjs\";\nimport { rangeEach } from \"../../helpers/number.mjs\";\nimport { addClass, removeClass } from \"../../helpers/dom/element.mjs\";\nimport { isKey } from \"../../helpers/unicode.mjs\";\nimport { SEPARATOR } from \"../contextMenu/predefinedItems/index.mjs\";\nimport * as constants from \"../../i18n/constants.mjs\";\nimport { ConditionComponent } from \"./component/condition.mjs\";\nimport { OperatorsComponent } from \"./component/operators.mjs\";\nimport { ValueComponent } from \"./component/value.mjs\";\nimport { ActionBarComponent } from \"./component/actionBar.mjs\";\nimport ConditionCollection from \"./conditionCollection.mjs\";\nimport DataFilter from \"./dataFilter.mjs\";\nimport ConditionUpdateObserver from \"./conditionUpdateObserver.mjs\";\nimport { createArrayAssertion, toEmptyString, unifyColumnValues } from \"./utils.mjs\";\nimport { createMenuFocusController } from \"./menu/focusController.mjs\";\nimport { CONDITION_NONE, CONDITION_BY_VALUE, OPERATION_AND, OPERATION_OR, OPERATION_OR_THEN_VARIABLE } from \"./constants.mjs\";\nimport { TrimmingMap } from \"../../translations/index.mjs\";\nexport const PLUGIN_KEY = 'filters';\nexport const PLUGIN_PRIORITY = 250;\nconst SHORTCUTS_GROUP = PLUGIN_KEY;\n\n/**\n * @plugin Filters\n * @class Filters\n *\n * @description\n * The plugin allows filtering the table data either by the built-in component or with the API.\n *\n * See [the filtering demo](@/guides/columns/column-filter/column-filter.md) for examples.\n *\n * @example\n * ::: only-for javascript\n * ```js\n * const container = document.getElementById('example');\n * const hot = new Handsontable(container, {\n *   data: getData(),\n *   colHeaders: true,\n *   rowHeaders: true,\n *   dropdownMenu: true,\n *   filters: true\n * });\n * ```\n * :::\n *\n * ::: only-for react\n * ```jsx\n * <HotTable\n *   data={getData()}\n *   colHeaders={true}\n *   rowHeaders={true}\n *   dropdownMenu={true}\n *   filters={true}\n * />\n * ```\n * :::\n */\nvar _menuFocusNavigator = /*#__PURE__*/new WeakMap();\nvar _Filters_brand = /*#__PURE__*/new WeakSet();\nexport class Filters extends BasePlugin {\n  static get PLUGIN_KEY() {\n    return PLUGIN_KEY;\n  }\n  static get PLUGIN_PRIORITY() {\n    return PLUGIN_PRIORITY;\n  }\n  static get PLUGIN_DEPS() {\n    return ['plugin:DropdownMenu', 'plugin:HiddenRows', 'cell-type:checkbox'];\n  }\n\n  /**\n   * Instance of {@link DropdownMenu}.\n   *\n   * @private\n   * @type {DropdownMenu}\n   */\n\n  constructor(hotInstance) {\n    super(hotInstance);\n    // One listener for the enable/disable functionality\n    /**\n     * `afterChange` listener.\n     *\n     * @param {Array} changes Array of changes.\n     */\n    _classPrivateMethodInitSpec(this, _Filters_brand);\n    _defineProperty(this, \"dropdownMenuPlugin\", null);\n    /**\n     * Instance of {@link ConditionCollection}.\n     *\n     * @private\n     * @type {ConditionCollection}\n     */\n    _defineProperty(this, \"conditionCollection\", null);\n    /**\n     * Instance of {@link ConditionUpdateObserver}.\n     *\n     * @private\n     * @type {ConditionUpdateObserver}\n     */\n    _defineProperty(this, \"conditionUpdateObserver\", null);\n    /**\n     * Map, where key is component identifier and value represent `BaseComponent` element or it derivatives.\n     *\n     * @private\n     * @type {Map}\n     */\n    _defineProperty(this, \"components\", new Map([['filter_by_condition', null], ['filter_operators', null], ['filter_by_condition2', null], ['filter_by_value', null], ['filter_action_bar', null]]));\n    /**\n     * Map of skipped rows by plugin.\n     *\n     * @private\n     * @type {null|TrimmingMap}\n     */\n    _defineProperty(this, \"filtersRowsMap\", null);\n    /**\n     * Menu focus navigator allows switching the focus position through Tab and Shift Tab keys.\n     *\n     * @type {MenuFocusNavigator|undefined}\n     */\n    _classPrivateFieldInitSpec(this, _menuFocusNavigator, void 0);\n    this.hot.addHook('afterGetColHeader', (col, TH) => _assertClassBrand(_Filters_brand, this, _onAfterGetColHeader).call(this, col, TH));\n  }\n\n  /**\n   * Checks if the plugin is enabled in the handsontable settings. This method is executed in {@link Hooks#beforeInit}\n   * hook and if it returns `true` then the {@link Filters#enablePlugin} method is called.\n   *\n   * @returns {boolean}\n   */\n  isEnabled() {\n    /* eslint-disable no-unneeded-ternary */\n    return this.hot.getSettings()[PLUGIN_KEY] ? true : false;\n  }\n\n  /**\n   * Enables the plugin functionality for this Handsontable instance.\n   */\n  enablePlugin() {\n    if (this.enabled) {\n      return;\n    }\n    this.filtersRowsMap = this.hot.rowIndexMapper.registerMap(this.pluginName, new TrimmingMap());\n    this.dropdownMenuPlugin = this.hot.getPlugin('dropdownMenu');\n    const dropdownSettings = this.hot.getSettings().dropdownMenu;\n    const menuContainer = dropdownSettings && dropdownSettings.uiContainer || this.hot.rootDocument.body;\n    const addConfirmationHooks = component => {\n      component.addLocalHook('accept', () => _assertClassBrand(_Filters_brand, this, _onActionBarSubmit).call(this, 'accept'));\n      component.addLocalHook('cancel', () => _assertClassBrand(_Filters_brand, this, _onActionBarSubmit).call(this, 'cancel'));\n      component.addLocalHook('change', command => _assertClassBrand(_Filters_brand, this, _onComponentChange).call(this, component, command));\n      return component;\n    };\n    const filterByConditionLabel = () => `${this.hot.getTranslatedPhrase(constants.FILTERS_DIVS_FILTER_BY_CONDITION)}:`;\n    const filterValueLabel = () => `${this.hot.getTranslatedPhrase(constants.FILTERS_DIVS_FILTER_BY_VALUE)}:`;\n    if (!this.components.get('filter_by_condition')) {\n      const conditionComponent = new ConditionComponent(this.hot, {\n        id: 'filter_by_condition',\n        name: filterByConditionLabel,\n        addSeparator: false,\n        menuContainer\n      });\n      conditionComponent.addLocalHook('afterClose', () => _assertClassBrand(_Filters_brand, this, _onSelectUIClosed).call(this));\n      this.components.set('filter_by_condition', addConfirmationHooks(conditionComponent));\n    }\n    if (!this.components.get('filter_operators')) {\n      this.components.set('filter_operators', new OperatorsComponent(this.hot, {\n        id: 'filter_operators',\n        name: 'Operators'\n      }));\n    }\n    if (!this.components.get('filter_by_condition2')) {\n      const conditionComponent = new ConditionComponent(this.hot, {\n        id: 'filter_by_condition2',\n        name: '',\n        addSeparator: true,\n        menuContainer\n      });\n      conditionComponent.addLocalHook('afterClose', () => _assertClassBrand(_Filters_brand, this, _onSelectUIClosed).call(this));\n      this.components.set('filter_by_condition2', addConfirmationHooks(conditionComponent));\n    }\n    if (!this.components.get('filter_by_value')) {\n      this.components.set('filter_by_value', addConfirmationHooks(new ValueComponent(this.hot, {\n        id: 'filter_by_value',\n        name: filterValueLabel\n      })));\n    }\n    if (!this.components.get('filter_action_bar')) {\n      this.components.set('filter_action_bar', addConfirmationHooks(new ActionBarComponent(this.hot, {\n        id: 'filter_action_bar',\n        name: 'Action bar'\n      })));\n    }\n    if (!this.conditionCollection) {\n      this.conditionCollection = new ConditionCollection(this.hot);\n    }\n    if (!this.conditionUpdateObserver) {\n      this.conditionUpdateObserver = new ConditionUpdateObserver(this.hot, this.conditionCollection, physicalColumn => this.getDataMapAtColumn(physicalColumn));\n      this.conditionUpdateObserver.addLocalHook('update', conditionState => _assertClassBrand(_Filters_brand, this, _updateComponents).call(this, conditionState));\n    }\n    this.components.forEach(component => component.show());\n    this.addHook('afterDropdownMenuDefaultOptions', defaultOptions => _assertClassBrand(_Filters_brand, this, _onAfterDropdownMenuDefaultOptions).call(this, defaultOptions));\n    this.addHook('afterDropdownMenuShow', () => _assertClassBrand(_Filters_brand, this, _onAfterDropdownMenuShow).call(this));\n    this.addHook('afterDropdownMenuHide', () => _assertClassBrand(_Filters_brand, this, _onAfterDropdownMenuHide).call(this));\n    this.addHook('afterChange', changes => _assertClassBrand(_Filters_brand, this, _onAfterChange).call(this, changes));\n\n    // Temp. solution (extending menu items bug in contextMenu/dropdownMenu)\n    if (this.hot.getSettings().dropdownMenu && this.dropdownMenuPlugin) {\n      this.dropdownMenuPlugin.disablePlugin();\n      this.dropdownMenuPlugin.enablePlugin();\n    }\n    if (!_classPrivateFieldGet(_menuFocusNavigator, this) && this.dropdownMenuPlugin.enabled) {\n      const mainMenu = this.dropdownMenuPlugin.menu;\n      const focusableItems = [\n      // A fake menu item that once focused allows escaping from the focus navigation (using Tab keys)\n      // to the menu navigation using arrow keys.\n      {\n        focus: () => {\n          const menuNavigator = mainMenu.getNavigator();\n          const lastSelectedMenuItem = _classPrivateFieldGet(_menuFocusNavigator, this).getLastMenuPage();\n          mainMenu.focus();\n          if (lastSelectedMenuItem > 0) {\n            menuNavigator.setCurrentPage(lastSelectedMenuItem);\n          } else {\n            menuNavigator.toFirstItem();\n          }\n        }\n      }, ...Array.from(this.components).map(_ref => {\n        let [, component] = _ref;\n        return component.getElements();\n      }).flat()];\n      _classPrivateFieldSet(_menuFocusNavigator, this, createMenuFocusController(mainMenu, focusableItems));\n      const forwardToFocusNavigation = event => {\n        _classPrivateFieldGet(_menuFocusNavigator, this).listen();\n        event.preventDefault();\n        if (isKey(event.keyCode, 'TAB')) {\n          if (event.shiftKey) {\n            _classPrivateFieldGet(_menuFocusNavigator, this).toPreviousItem();\n          } else {\n            _classPrivateFieldGet(_menuFocusNavigator, this).toNextItem();\n          }\n        }\n      };\n      this.components.get('filter_by_value').addLocalHook('listTabKeydown', forwardToFocusNavigation);\n      this.components.get('filter_by_condition').addLocalHook('selectTabKeydown', forwardToFocusNavigation);\n    }\n    this.registerShortcuts();\n    super.enablePlugin();\n  }\n\n  /**\n   * Disables the plugin functionality for this Handsontable instance.\n   */\n  disablePlugin() {\n    if (this.enabled) {\n      var _this$dropdownMenuPlu;\n      if ((_this$dropdownMenuPlu = this.dropdownMenuPlugin) !== null && _this$dropdownMenuPlu !== void 0 && _this$dropdownMenuPlu.enabled) {\n        this.dropdownMenuPlugin.menu.clearLocalHooks();\n      }\n      this.components.forEach((component, key) => {\n        component.destroy();\n        this.components.set(key, null);\n      });\n      this.conditionCollection.destroy();\n      this.conditionCollection = null;\n      this.hot.rowIndexMapper.unregisterMap(this.pluginName);\n    }\n    this.unregisterShortcuts();\n    super.disablePlugin();\n  }\n\n  /**\n   * Register shortcuts responsible for clearing the filters.\n   *\n   * @private\n   */\n  registerShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').addShortcut({\n      keys: [['Alt', 'A']],\n      stopPropagation: true,\n      callback: () => {\n        const selection = this.hot.getSelected();\n        this.clearConditions();\n        this.filter();\n        if (selection) {\n          this.hot.selectCells(selection);\n        }\n      },\n      group: SHORTCUTS_GROUP\n    });\n  }\n\n  /**\n   * Unregister shortcuts responsible for clearing the filters.\n   *\n   * @private\n   */\n  unregisterShortcuts() {\n    this.hot.getShortcutManager().getContext('grid').removeShortcutsByGroup(SHORTCUTS_GROUP);\n  }\n\n  /* eslint-disable jsdoc/require-description-complete-sentence */\n  /**\n   * @memberof Filters#\n   * @function addCondition\n   * @description\n   * Adds condition to the conditions collection at specified column index.\n   *\n   * Possible predefined conditions:\n   *  * `begins_with` - Begins with\n   *  * `between` - Between\n   *  * `by_value` - By value\n   *  * `contains` - Contains\n   *  * `date_after` - After a date\n   *  * `date_before` - Before a date\n   *  * `date_today` - Today\n   *  * `date_tomorrow` - Tomorrow\n   *  * `date_yesterday` - Yesterday\n   *  * `empty` - Empty\n   *  * `ends_with` - Ends with\n   *  * `eq` - Equal\n   *  * `gt` - Greater than\n   *  * `gte` - Greater than or equal\n   *  * `lt` - Less than\n   *  * `lte` - Less than or equal\n   *  * `none` - None (no filter)\n   *  * `not_between` - Not between\n   *  * `not_contains` - Not contains\n   *  * `not_empty` - Not empty\n   *  * `neq` - Not equal.\n   *\n   * Possible operations on collection of conditions:\n   *  * `conjunction` - [**Conjunction**](https://en.wikipedia.org/wiki/Logical_conjunction) on conditions collection (by default), i.e. for such operation: <br/> c1 AND c2 AND c3 AND c4 ... AND cn === TRUE, where c1 ... cn are conditions.\n   *  * `disjunction` - [**Disjunction**](https://en.wikipedia.org/wiki/Logical_disjunction) on conditions collection, i.e. for such operation: <br/> c1 OR c2 OR c3 OR c4 ... OR cn === TRUE, where c1, c2, c3, c4 ... cn are conditions.\n   *  * `disjunctionWithExtraCondition` - **Disjunction** on first `n - 1`\\* conditions from collection with an extra requirement computed from the last condition, i.e. for such operation: <br/> c1 OR c2 OR c3 OR c4 ... OR cn-1 AND cn === TRUE, where c1, c2, c3, c4 ... cn are conditions.\n   *\n   * \\* when `n` is collection size; it's used i.e. for one operation introduced from UI (when choosing from filter's drop-down menu two conditions with OR operator between them, mixed with choosing values from the multiple choice select)\n   *\n   * **Note**: Mind that you cannot mix different types of operations (for instance, if you use `conjunction`, use it consequently for a particular column).\n   *\n   * @example\n   * ::: only-for javascript\n   * ```js\n   * const container = document.getElementById('example');\n   * const hot = new Handsontable(container, {\n   *   data: getData(),\n   *   filters: true\n   * });\n   *\n   * // access to filters plugin instance\n   * const filtersPlugin = hot.getPlugin('filters');\n   *\n   * // add filter \"Greater than\" 95 to column at index 1\n   * filtersPlugin.addCondition(1, 'gt', [95]);\n   * filtersPlugin.filter();\n   *\n   * // add filter \"By value\" to column at index 1\n   * // in this case all value's that don't match will be filtered.\n   * filtersPlugin.addCondition(1, 'by_value', [['ing', 'ed', 'as', 'on']]);\n   * filtersPlugin.filter();\n   *\n   * // add filter \"Begins with\" with value \"de\" AND \"Not contains\" with value \"ing\"\n   * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'conjunction');\n   * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'conjunction');\n   * filtersPlugin.filter();\n   *\n   * // add filter \"Begins with\" with value \"de\" OR \"Not contains\" with value \"ing\"\n   * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'disjunction');\n   * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'disjunction');\n   * filtersPlugin.filter();\n   * ```\n   * :::\n   *\n   * ::: only-for react\n   * ```jsx\n   * const hotRef = useRef(null);\n   *\n   * ...\n   *\n   * <HotTable\n   *   ref={hotRef}\n   *   data={getData()}\n   *   filters={true}\n   * />\n   *\n   * // access to filters plugin instance\n   * const hot = hotRef.current.hotInstance;\n   * const filtersPlugin = hot.getPlugin('filters');\n   *\n   * // add filter \"Greater than\" 95 to column at index 1\n   * filtersPlugin.addCondition(1, 'gt', [95]);\n   * filtersPlugin.filter();\n   *\n   * // add filter \"By value\" to column at index 1\n   * // in this case all value's that don't match will be filtered.\n   * filtersPlugin.addCondition(1, 'by_value', [['ing', 'ed', 'as', 'on']]);\n   * filtersPlugin.filter();\n   *\n   * // add filter \"Begins with\" with value \"de\" AND \"Not contains\" with value \"ing\"\n   * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'conjunction');\n   * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'conjunction');\n   * filtersPlugin.filter();\n   *\n   * // add filter \"Begins with\" with value \"de\" OR \"Not contains\" with value \"ing\"\n   * filtersPlugin.addCondition(1, 'begins_with', ['de'], 'disjunction');\n   * filtersPlugin.addCondition(1, 'not_contains', ['ing'], 'disjunction');\n   * filtersPlugin.filter();\n   * ```\n   * :::\n   *\n   * @param {number} column Visual column index.\n   * @param {string} name Condition short name.\n   * @param {Array} args Condition arguments.\n   * @param {string} [operationId=conjunction] `id` of operation which is performed on the column.\n   */\n  /* eslint-enable jsdoc/require-description-complete-sentence */\n  addCondition(column, name, args) {\n    let operationId = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : OPERATION_AND;\n    const physicalColumn = this.hot.toPhysicalColumn(column);\n    this.conditionCollection.addCondition(physicalColumn, {\n      command: {\n        key: name\n      },\n      args\n    }, operationId);\n  }\n\n  /**\n   * Removes conditions at specified column index.\n   *\n   * @param {number} column Visual column index.\n   */\n  removeConditions(column) {\n    const physicalColumn = this.hot.toPhysicalColumn(column);\n    this.conditionCollection.removeConditions(physicalColumn);\n  }\n\n  /**\n   * Clears all conditions previously added to the collection for the specified column index or, if the column index\n   * was not passed, clear the conditions for all columns.\n   *\n   * @param {number} [column] Visual column index.\n   */\n  clearConditions(column) {\n    if (column === undefined) {\n      this.conditionCollection.clean();\n    } else {\n      const physicalColumn = this.hot.toPhysicalColumn(column);\n      this.conditionCollection.removeConditions(physicalColumn);\n    }\n  }\n\n  /**\n   * Filters data based on added filter conditions.\n   *\n   * @fires Hooks#beforeFilter\n   * @fires Hooks#afterFilter\n   */\n  filter() {\n    const {\n      navigableHeaders\n    } = this.hot.getSettings();\n    const dataFilter = this._createDataFilter();\n    const needToFilter = !this.conditionCollection.isEmpty();\n    let visibleVisualRows = [];\n    const conditions = this.conditionCollection.exportAllConditions();\n    const allowFiltering = this.hot.runHooks('beforeFilter', conditions, this.conditionCollection.previousConditionStack);\n    if (allowFiltering !== false) {\n      if (needToFilter) {\n        const trimmedRows = [];\n        this.hot.batchExecution(() => {\n          this.filtersRowsMap.clear();\n          visibleVisualRows = arrayMap(dataFilter.filter(), rowData => rowData.meta.visualRow);\n          const visibleVisualRowsAssertion = createArrayAssertion(visibleVisualRows);\n          rangeEach(this.hot.countSourceRows() - 1, row => {\n            if (!visibleVisualRowsAssertion(row)) {\n              trimmedRows.push(row);\n            }\n          });\n          arrayEach(trimmedRows, physicalRow => {\n            this.filtersRowsMap.setValueAtIndex(physicalRow, true);\n          });\n        }, true);\n        if (!navigableHeaders && !visibleVisualRows.length) {\n          this.hot.deselectCell();\n        }\n      } else {\n        this.filtersRowsMap.clear();\n      }\n    }\n    this.hot.runHooks('afterFilter', conditions);\n    this.conditionCollection.setPreviousConditionStack(null);\n    this.hot.view.adjustElementsSize();\n    this.hot.render();\n    if (this.hot.selection.isSelected()) {\n      this.hot.selectCell(navigableHeaders ? -1 : 0, this.hot.getSelectedRangeLast().highlight.col);\n    }\n  }\n\n  /**\n   * Gets last selected column index.\n   *\n   * @returns {{visualIndex: number, physicalIndex: number} | null} Returns `null` when a column is\n   * not selected. Otherwise, returns an object with `visualIndex` and `physicalIndex` properties containing\n   * the index of the column.\n   */\n  getSelectedColumn() {\n    var _this$hot$getSelected;\n    const highlight = (_this$hot$getSelected = this.hot.getSelectedRangeLast()) === null || _this$hot$getSelected === void 0 ? void 0 : _this$hot$getSelected.highlight;\n    if (!highlight) {\n      return null;\n    }\n    return {\n      visualIndex: highlight.col,\n      physicalIndex: this.hot.toPhysicalColumn(highlight.col)\n    };\n  }\n\n  /**\n   * Returns handsontable source data with cell meta based on current selection.\n   *\n   * @param {number} [column] The physical column index. By default column index accept the value of the selected column.\n   * @returns {Array} Returns array of objects where keys as row index.\n   */\n  getDataMapAtColumn(column) {\n    const visualColumn = this.hot.toVisualColumn(column);\n    const data = [];\n    arrayEach(this.hot.getSourceDataAtCol(visualColumn), (value, rowIndex) => {\n      var _this$hot$getDataAtCe;\n      const {\n        row,\n        col,\n        visualCol,\n        visualRow,\n        type,\n        instance,\n        dateFormat,\n        locale\n      } = this.hot.getCellMeta(rowIndex, visualColumn);\n      const dataValue = (_this$hot$getDataAtCe = this.hot.getDataAtCell(this.hot.toVisualRow(rowIndex), visualColumn)) !== null && _this$hot$getDataAtCe !== void 0 ? _this$hot$getDataAtCe : value;\n      data.push({\n        meta: {\n          row,\n          col,\n          visualCol,\n          visualRow,\n          type,\n          instance,\n          dateFormat,\n          locale\n        },\n        value: toEmptyString(dataValue)\n      });\n    });\n    return data;\n  }\n  /**\n   * Update the condition of ValueComponent, based on the handled changes.\n   *\n   * @private\n   * @param {number} columnIndex Column index of handled ValueComponent condition.\n   */\n  updateValueComponentCondition(columnIndex) {\n    const dataAtCol = this.hot.getDataAtCol(columnIndex);\n    const selectedValues = unifyColumnValues(dataAtCol);\n    this.conditionUpdateObserver.updateStatesAtColumn(columnIndex, selectedValues);\n  }\n\n  /**\n   * Restores components to its saved state.\n   *\n   * @private\n   * @param {Array} components List of components.\n   */\n  restoreComponents(components) {\n    var _this$getSelectedColu;\n    const physicalIndex = (_this$getSelectedColu = this.getSelectedColumn()) === null || _this$getSelectedColu === void 0 ? void 0 : _this$getSelectedColu.physicalIndex;\n    components.forEach(component => {\n      if (component.isHidden()) {\n        return;\n      }\n      component.restoreState(physicalIndex);\n    });\n    this.updateDependentComponentsVisibility();\n  }\n\n  /**\n   * After dropdown menu show listener.\n   */\n\n  /**\n   * Get an operation, based on the number and types of arguments (where arguments are states of components).\n   *\n   * @param {string} suggestedOperation Operation which was chosen by user from UI.\n   * @param {object} byConditionState1 State of first condition component.\n   * @param {object} byConditionState2 State of second condition component.\n   * @param {object} byValueState State of value component.\n   * @private\n   * @returns {string}\n   */\n  getOperationBasedOnArguments(suggestedOperation, byConditionState1, byConditionState2, byValueState) {\n    let operation = suggestedOperation;\n    if (operation === OPERATION_OR && byConditionState1.command.key !== CONDITION_NONE && byConditionState2.command.key !== CONDITION_NONE && byValueState.command.key !== CONDITION_NONE) {\n      operation = OPERATION_OR_THEN_VARIABLE;\n    } else if (byValueState.command.key !== CONDITION_NONE) {\n      if (byConditionState1.command.key === CONDITION_NONE || byConditionState2.command.key === CONDITION_NONE) {\n        operation = OPERATION_AND;\n      }\n    }\n    return operation;\n  }\n\n  /**\n   * On action bar submit listener.\n   *\n   * @private\n   * @param {string} submitType The submit type.\n   */\n\n  /**\n   * Listen to the keyboard input on document body and forward events to instance of Handsontable\n   * created by DropdownMenu plugin.\n   *\n   * @private\n   */\n  setListeningDropdownMenu() {\n    if (this.dropdownMenuPlugin) {\n      this.dropdownMenuPlugin.setListening();\n    }\n  }\n\n  /**\n   * Updates visibility of some of the components, based on the state of the parent component.\n   *\n   * @private\n   */\n  updateDependentComponentsVisibility() {\n    const component = this.components.get('filter_by_condition');\n    const {\n      command\n    } = component.getState();\n    const componentsToShow = [this.components.get('filter_by_condition2'), this.components.get('filter_operators')];\n    if (command.showOperators) {\n      this.showComponents(...componentsToShow);\n    } else {\n      this.hideComponents(...componentsToShow);\n    }\n  }\n\n  /**\n   * On after get column header listener.\n   *\n   * @param {number} col Visual column index.\n   * @param {HTMLTableCellElement} TH Header's TH element.\n   */\n\n  /**\n   * Creates DataFilter instance based on condition collection.\n   *\n   * @private\n   * @param {ConditionCollection} conditionCollection Condition collection object.\n   * @returns {DataFilter}\n   */\n  _createDataFilter() {\n    let conditionCollection = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.conditionCollection;\n    return new DataFilter(conditionCollection, physicalColumn => this.getDataMapAtColumn(physicalColumn));\n  }\n\n  /**\n   * It updates the components state. The state is triggered by ConditionUpdateObserver, which\n   * reacts to any condition added to the condition collection. It may be added through the UI\n   * components or by API call.\n   *\n   * @param {object} conditionsState An object with the state generated by UI components.\n   */\n\n  /**\n   * Returns indexes of passed components inside list of `dropdownMenu` items.\n   *\n   * @private\n   * @param {...BaseComponent} components List of components.\n   * @returns {Array}\n   */\n  getIndexesOfComponents() {\n    const indexes = [];\n    if (!this.dropdownMenuPlugin) {\n      return indexes;\n    }\n    const menu = this.dropdownMenuPlugin.menu;\n    for (var _len = arguments.length, components = new Array(_len), _key = 0; _key < _len; _key++) {\n      components[_key] = arguments[_key];\n    }\n    arrayEach(components, component => {\n      arrayEach(menu.menuItems, (item, index) => {\n        if (item.key === component.getMenuItemDescriptor().key) {\n          indexes.push(index);\n        }\n      });\n    });\n    return indexes;\n  }\n\n  /**\n   * Changes visibility of component.\n   *\n   * @private\n   * @param {boolean} visible Determine if components should be visible.\n   * @param {...BaseComponent} components List of components.\n   */\n  changeComponentsVisibility() {\n    let visible = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    if (!this.dropdownMenuPlugin) {\n      return;\n    }\n    const menu = this.dropdownMenuPlugin.menu;\n    const hotMenu = menu.hotMenu;\n    const hiddenRows = hotMenu.getPlugin('hiddenRows');\n    for (var _len2 = arguments.length, components = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n      components[_key2 - 1] = arguments[_key2];\n    }\n    const indexes = this.getIndexesOfComponents(...components);\n    if (visible) {\n      hiddenRows.showRows(indexes);\n    } else {\n      hiddenRows.hideRows(indexes);\n    }\n    hotMenu.render();\n  }\n\n  /**\n   * Hides components of filters `dropdownMenu`.\n   *\n   * @private\n   * @param {...BaseComponent} components List of components.\n   */\n  hideComponents() {\n    for (var _len3 = arguments.length, components = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      components[_key3] = arguments[_key3];\n    }\n    this.changeComponentsVisibility(false, ...components);\n  }\n\n  /**\n   * Shows components of filters `dropdownMenu`.\n   *\n   * @private\n   * @param {...BaseComponent} components List of components.\n   */\n  showComponents() {\n    for (var _len4 = arguments.length, components = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      components[_key4] = arguments[_key4];\n    }\n    this.changeComponentsVisibility(true, ...components);\n  }\n\n  /**\n   * Destroys the plugin instance.\n   */\n  destroy() {\n    if (this.enabled) {\n      this.components.forEach((component, key) => {\n        if (component !== null) {\n          component.destroy();\n          this.components.set(key, null);\n        }\n      });\n      this.conditionCollection.destroy();\n      this.conditionUpdateObserver.destroy();\n      this.hot.rowIndexMapper.unregisterMap(this.pluginName);\n    }\n    super.destroy();\n  }\n}\nfunction _onAfterChange(changes) {\n  if (changes) {\n    arrayEach(changes, change => {\n      const [, prop] = change;\n      const columnIndex = this.hot.propToCol(prop);\n      if (this.conditionCollection.hasConditions(columnIndex)) {\n        this.updateValueComponentCondition(columnIndex);\n      }\n    });\n  }\n}\nfunction _onAfterDropdownMenuShow() {\n  const menu = this.dropdownMenuPlugin.menu;\n  this.restoreComponents(Array.from(this.components.values()));\n  menu.updateMenuDimensions();\n}\n/**\n * After dropdown menu hide listener.\n */\nfunction _onAfterDropdownMenuHide() {\n  this.components.get('filter_by_condition').getSelectElement().closeOptions();\n  this.components.get('filter_by_condition2').getSelectElement().closeOptions();\n}\n/**\n * After dropdown menu default options listener.\n *\n * @param {object} defaultOptions ContextMenu default item options.\n */\nfunction _onAfterDropdownMenuDefaultOptions(defaultOptions) {\n  defaultOptions.items.push({\n    name: SEPARATOR\n  });\n  this.components.forEach(component => {\n    defaultOptions.items.push(component.getMenuItemDescriptor());\n  });\n}\nfunction _onActionBarSubmit(submitType) {\n  var _this$dropdownMenuPlu3;\n  if (submitType === 'accept') {\n    const selectedColumn = this.getSelectedColumn();\n    if (selectedColumn === null) {\n      var _this$dropdownMenuPlu2;\n      (_this$dropdownMenuPlu2 = this.dropdownMenuPlugin) === null || _this$dropdownMenuPlu2 === void 0 || _this$dropdownMenuPlu2.close();\n      return;\n    }\n    const {\n      physicalIndex\n    } = selectedColumn;\n    const byConditionState1 = this.components.get('filter_by_condition').getState();\n    const byConditionState2 = this.components.get('filter_by_condition2').getState();\n    const byValueState = this.components.get('filter_by_value').getState();\n    const operation = this.getOperationBasedOnArguments(this.components.get('filter_operators').getActiveOperationId(), byConditionState1, byConditionState2, byValueState);\n    this.conditionUpdateObserver.groupChanges();\n    let columnStackPosition = this.conditionCollection.getColumnStackPosition(physicalIndex);\n    if (columnStackPosition === -1) {\n      columnStackPosition = undefined;\n    }\n    this.conditionCollection.removeConditions(physicalIndex);\n    if (byConditionState1.command.key !== CONDITION_NONE) {\n      this.conditionCollection.addCondition(physicalIndex, byConditionState1, operation, columnStackPosition);\n      if (byConditionState2.command.key !== CONDITION_NONE) {\n        this.conditionCollection.addCondition(physicalIndex, byConditionState2, operation, columnStackPosition);\n      }\n    }\n    if (byValueState.command.key !== CONDITION_NONE) {\n      this.conditionCollection.addCondition(physicalIndex, byValueState, operation, columnStackPosition);\n    }\n    this.conditionUpdateObserver.flush();\n    this.components.forEach(component => component.saveState(physicalIndex));\n    this.filtersRowsMap.clear();\n    this.filter();\n  }\n  (_this$dropdownMenuPlu3 = this.dropdownMenuPlugin) === null || _this$dropdownMenuPlu3 === void 0 || _this$dropdownMenuPlu3.close();\n}\n/**\n * On component change listener.\n *\n * @param {BaseComponent} component Component inheriting BaseComponent.\n * @param {object} command Menu item object (command).\n */\nfunction _onComponentChange(component, command) {\n  this.updateDependentComponentsVisibility();\n  if (component.constructor === ConditionComponent && !command.inputsCount) {\n    this.setListeningDropdownMenu();\n  }\n}\n/**\n * On component SelectUI closed listener.\n */\nfunction _onSelectUIClosed() {\n  this.setListeningDropdownMenu();\n}\nfunction _onAfterGetColHeader(col, TH) {\n  const physicalColumn = this.hot.toPhysicalColumn(col);\n  if (this.enabled && this.conditionCollection.hasConditions(physicalColumn)) {\n    addClass(TH, 'htFiltersActive');\n  } else {\n    removeClass(TH, 'htFiltersActive');\n  }\n}\nfunction _updateComponents(conditionsState) {\n  var _this$dropdownMenuPlu4;\n  if (!((_this$dropdownMenuPlu4 = this.dropdownMenuPlugin) !== null && _this$dropdownMenuPlu4 !== void 0 && _this$dropdownMenuPlu4.enabled)) {\n    return;\n  }\n  const {\n    editedConditionStack: {\n      conditions,\n      column\n    }\n  } = conditionsState;\n  const conditionsByValue = conditions.filter(condition => condition.name === CONDITION_BY_VALUE);\n  const conditionsWithoutByValue = conditions.filter(condition => condition.name !== CONDITION_BY_VALUE);\n  if (conditionsByValue.length >= 2 || conditionsWithoutByValue.length >= 3) {\n    warn(toSingleLine`The filter conditions have been applied properly, but couldn’t be displayed visually.\\x20\n        The overall amount of conditions exceed the capability of the dropdown menu.\\x20\n        For more details see the documentation.`);\n  } else {\n    const operationType = this.conditionCollection.getOperation(column);\n    this.components.get('filter_by_condition').updateState(conditionsWithoutByValue[0], column);\n    this.components.get('filter_by_condition2').updateState(conditionsWithoutByValue[1], column);\n    this.components.get('filter_operators').updateState(operationType, column);\n    this.components.get('filter_by_value').updateState(conditionsState);\n  }\n}"],"mappings":"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AAC;QACtB,IAAI,CAACC,MAAM,CAAC,CAAC;QACb,IAAIH,SAAS,EAAE;UACb,IAAI,CAAC1F,GAAG,CAAC8F,WAAW,CAACJ,SAAS,CAAC;QACjC;MACF,CAAC;MACDK,KAAK,EAAEzG;IACT,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;AACA;AACA;EACE6F,mBAAmBA,CAAA,EAAG;IACpB,IAAI,CAACnF,GAAG,CAACoF,kBAAkB,CAAC,CAAC,CAACC,UAAU,CAAC,MAAM,CAAC,CAACW,sBAAsB,CAAC1G,eAAe,CAAC;EAC1F;;EAEA;EACA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE;EACA2G,YAAYA,CAACC,MAAM,EAAE/D,IAAI,EAAEgE,IAAI,EAAE;IAC/B,IAAIC,WAAW,GAAG9I,SAAS,CAACC,MAAM,GAAG,CAAC,IAAID,SAAS,CAAC,CAAC,CAAC,KAAK+I,SAAS,GAAG/I,SAAS,CAAC,CAAC,CAAC,GAAG0B,aAAa;IACnG,MAAMwD,cAAc,GAAG,IAAI,CAACxC,GAAG,CAACsG,gBAAgB,CAACJ,MAAM,CAAC;IACxD,IAAI,CAAC5D,mBAAmB,CAAC2D,YAAY,CAACzD,cAAc,EAAE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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}