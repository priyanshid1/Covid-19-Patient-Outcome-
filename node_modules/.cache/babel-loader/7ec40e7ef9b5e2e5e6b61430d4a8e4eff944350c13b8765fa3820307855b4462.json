{"ast":null,"code":"function _classPrivateFieldInitSpec(e, t, a) {\n  _checkPrivateRedeclaration(e, t), t.set(e, a);\n}\nfunction _checkPrivateRedeclaration(e, t) {\n  if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\");\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _classPrivateFieldSet(s, a, r) {\n  return s.set(_assertClassBrand(s, a), r), r;\n}\nfunction _classPrivateFieldGet(s, a) {\n  return s.get(_assertClassBrand(s, a));\n}\nfunction _assertClassBrand(e, t, n) {\n  if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n;\n  throw new TypeError(\"Private element is not present on this object\");\n}\nimport { Positioner } from \"./positioner.mjs\";\nimport { createMenuNavigator } from \"./navigator.mjs\";\nimport { createKeyboardShortcutsCtrl } from \"./shortcuts.mjs\";\nimport { SEPARATOR, NO_ITEMS, predefinedItems } from \"./../predefinedItems/index.mjs\";\nimport { filterSeparators, hasSubMenu, isItemHidden, normalizeSelection, isItemSubMenu, isItemDisabled, isItemSeparator } from \"./utils.mjs\";\nimport EventManager from \"../../../eventManager.mjs\";\nimport { arrayEach, arrayFilter, arrayReduce } from \"../../../helpers/array.mjs\";\nimport { isWindowsOS, isMobileBrowser, isIpadOS } from \"../../../helpers/browser.mjs\";\nimport { addClass, isChildOf, getComputedStyle, getParentWindow, hasClass, setAttribute, outerHeight } from \"../../../helpers/dom/element.mjs\";\nimport { isRightClick } from \"../../../helpers/dom/event.mjs\";\nimport { debounce, isFunction } from \"../../../helpers/function.mjs\";\nimport { isUndefined, isDefined } from \"../../../helpers/mixed.mjs\";\nimport { mixin } from \"../../../helpers/object.mjs\";\nimport localHooks from \"../../../mixins/localHooks.mjs\";\nimport { createMenuItemRenderer } from \"./menuItemRenderer.mjs\";\nimport { A11Y_EXPANDED, A11Y_MENU, A11Y_TABINDEX } from \"../../../helpers/a11y.mjs\";\nconst MIN_WIDTH = 215;\n\n/**\n * @typedef MenuOptions\n * @property {Menu} [parent=null] Instance of {@link Menu}.\n * @property {string} [name=null] Name of the menu.\n * @property {string} [className=''] Custom class name.\n * @property {boolean} [keepInViewport=true] Determine if should be kept in viewport.\n * @property {boolean} [standalone] Enabling closing menu when clicked element is not belongs to menu itself.\n * @property {number} [minWidth=MIN_WIDTH] The minimum width.\n * @property {HTMLElement} [container] The container.\n */\n\n/**\n * @private\n * @class Menu\n */\nvar _navigator = /*#__PURE__*/new WeakMap();\nvar _shortcutsCtrl = /*#__PURE__*/new WeakMap();\nvar _tableBorderWidth = /*#__PURE__*/new WeakMap();\nexport class Menu {\n  /**\n   * Getter for the table border width.\n   * This getter retrieves the border width of the table used in the menu.\n   *\n   * @returns {number} The border width of the table in pixels.\n   */\n  get tableBorderWidth() {\n    if (_classPrivateFieldGet(_tableBorderWidth, this) === undefined && this.hotMenu) {\n      _classPrivateFieldSet(_tableBorderWidth, this, parseInt(getComputedStyle(this.hotMenu.view._wt.wtTable.TABLE).borderWidth, 10));\n    }\n    return _classPrivateFieldGet(_tableBorderWidth, this);\n  }\n\n  /**\n   * @param {Core} hotInstance Handsontable instance.\n   * @param {MenuOptions} [options] Menu options.\n   */\n  constructor(hotInstance, options) {\n    var _this = this;\n    /**\n     * The Handsontable instance.\n     *\n     * @type {Core}\n     */\n    _defineProperty(this, \"hot\", void 0);\n    /**\n     * The Menu options.\n     *\n     * @type {object}\n     */\n    _defineProperty(this, \"options\", void 0);\n    /**\n     * @type {EventManager}\n     */\n    _defineProperty(this, \"eventManager\", new EventManager(this));\n    /**\n     * The Menu container element.\n     *\n     * @type {HTMLElement}\n     */\n    _defineProperty(this, \"container\", void 0);\n    /**\n     * @type {Positioner}\n     */\n    _defineProperty(this, \"positioner\", void 0);\n    /**\n     * The instance of the Handsontable that is used as a menu.\n     *\n     * @type {Core}\n     */\n    _defineProperty(this, \"hotMenu\", null);\n    /**\n     * The collection of the Handsontable instances that are used as sub-menus.\n     *\n     * @type {object}\n     */\n    _defineProperty(this, \"hotSubMenus\", {});\n    /**\n     * If the menu acts as the sub-menu then this property contains the reference to the parent menu.\n     *\n     * @type {Menu}\n     */\n    _defineProperty(this, \"parentMenu\", void 0);\n    /**\n     * The menu items entries.\n     *\n     * @type {object[]}\n     */\n    _defineProperty(this, \"menuItems\", null);\n    /**\n     * @type {boolean}\n     */\n    _defineProperty(this, \"origOutsideClickDeselects\", null);\n    /**\n     * The controller module that allows modifying the menu item selection positions.\n     *\n     * @type {Paginator}\n     */\n    _classPrivateFieldInitSpec(this, _navigator, void 0);\n    /**\n     * The controller module that allows extending the keyboard shortcuts for the menu.\n     *\n     * @type {KeyboardShortcutsMenuController}\n     */\n    _classPrivateFieldInitSpec(this, _shortcutsCtrl, void 0);\n    /**\n     * The border width of the table used in the menu.\n     *\n     * @type {number}\n     */\n    _classPrivateFieldInitSpec(this, _tableBorderWidth, void 0);\n    this.hot = hotInstance;\n    this.options = options || {\n      parent: null,\n      name: null,\n      className: '',\n      keepInViewport: true,\n      standalone: false,\n      minWidth: MIN_WIDTH,\n      container: this.hot.rootDocument.documentElement\n    };\n    this.container = this.createContainer(this.options.name);\n    this.positioner = new Positioner(this.options.keepInViewport);\n    this.parentMenu = this.options.parent || null;\n    this.registerEvents();\n    if (this.isSubMenu()) {\n      this.addLocalHook('afterSelectionChange', function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        return _this.parentMenu.runLocalHooks('afterSelectionChange', ...args);\n      });\n    }\n  }\n\n  /**\n   * Register event listeners.\n   *\n   * @private\n   */\n  registerEvents() {\n    let frame = this.hot.rootWindow;\n    while (frame) {\n      this.eventManager.addEventListener(frame.document, 'mousedown', event => this.onDocumentMouseDown(event));\n      this.eventManager.addEventListener(frame.document, 'touchstart', event => this.onDocumentMouseDown(event));\n      this.eventManager.addEventListener(frame.document, 'contextmenu', event => this.onDocumentContextMenu(event));\n      frame = getParentWindow(frame);\n    }\n  }\n\n  /**\n   * Set array of objects which defines menu items.\n   *\n   * @param {Array} menuItems Menu items to display.\n   */\n  setMenuItems(menuItems) {\n    this.menuItems = menuItems;\n  }\n\n  /**\n   * Gets the controller object that allows modifying the the menu item selection.\n   *\n   * @returns {Paginator | undefined}\n   */\n  getNavigator() {\n    return _classPrivateFieldGet(_navigator, this);\n  }\n\n  /**\n   * Gets the controller object that allows extending the keyboard shortcuts of the menu.\n   *\n   * @returns {KeyboardShortcutsMenuController | undefined}\n   */\n  getKeyboardShortcutsCtrl() {\n    return _classPrivateFieldGet(_shortcutsCtrl, this);\n  }\n\n  /**\n   * Returns currently selected menu item. Returns `null` if no item was selected.\n   *\n   * @returns {object|null}\n   */\n  getSelectedItem() {\n    return this.hasSelectedItem() ? this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]) : null;\n  }\n\n  /**\n   * Checks if the menu has selected (highlighted) any item from the menu list.\n   *\n   * @returns {boolean}\n   */\n  hasSelectedItem() {\n    return Array.isArray(this.hotMenu.getSelectedLast());\n  }\n\n  /**\n   * Check if menu is using as sub-menu.\n   *\n   * @returns {boolean}\n   */\n  isSubMenu() {\n    return this.parentMenu !== null;\n  }\n\n  /**\n   * Open menu.\n   *\n   * @fires Hooks#beforeContextMenuShow\n   * @fires Hooks#afterContextMenuShow\n   */\n  open() {\n    this.runLocalHooks('beforeOpen');\n    this.container.removeAttribute('style');\n    this.container.style.display = 'block';\n    const delayedOpenSubMenu = debounce(row => this.openSubMenu(row), 300);\n    const minWidthOfMenu = this.options.minWidth || MIN_WIDTH;\n    let noItemsDefined = false;\n    let filteredItems = arrayFilter(this.menuItems, item => {\n      if (item.key === NO_ITEMS) {\n        noItemsDefined = true;\n      }\n      return isItemHidden(item, this.hot);\n    });\n    if (filteredItems.length < 1 && !noItemsDefined) {\n      filteredItems.push(predefinedItems()[NO_ITEMS]);\n    } else if (filteredItems.length === 0) {\n      return;\n    }\n    filteredItems = filterSeparators(filteredItems, SEPARATOR);\n    let shouldAutoCloseMenu = false;\n    const settings = {\n      data: filteredItems,\n      colHeaders: false,\n      autoColumnSize: true,\n      autoWrapRow: false,\n      modifyColWidth(width) {\n        if (isDefined(width) && width < minWidthOfMenu) {\n          return minWidthOfMenu;\n        }\n        return width;\n      },\n      autoRowSize: false,\n      readOnly: true,\n      editor: false,\n      copyPaste: false,\n      hiddenRows: true,\n      maxCols: 1,\n      columns: [{\n        data: 'name',\n        renderer: createMenuItemRenderer(this.hot)\n      }],\n      renderAllRows: true,\n      fragmentSelection: false,\n      outsideClickDeselects: false,\n      disableVisualSelection: 'area',\n      layoutDirection: this.hot.isRtl() ? 'rtl' : 'ltr',\n      ariaTags: false,\n      beforeOnCellMouseOver: (event, coords) => {\n        _classPrivateFieldGet(_navigator, this).setCurrentPage(coords.row);\n      },\n      afterOnCellMouseOver: (event, coords) => {\n        if (this.isAllSubMenusClosed()) {\n          delayedOpenSubMenu(coords.row);\n        } else {\n          this.openSubMenu(coords.row);\n        }\n      },\n      rowHeights: row => filteredItems[row].name === SEPARATOR ? 1 : undefined,\n      afterOnCellContextMenu: event => {\n        event.preventDefault();\n\n        // On the Windows platform, the \"contextmenu\" is triggered after the \"mouseup\" so that's\n        // why the closing menu is here. (#6507#issuecomment-582392301).\n        if (isWindowsOS() && shouldAutoCloseMenu && this.hasSelectedItem()) {\n          this.close(true);\n        }\n      },\n      afterSelection: (row, column, row2, column2, preventScrolling) => {\n        // do not scroll the viewport when mouse clicks on partially visible menu item\n        if (this.hotMenu.view.isMouseDown()) {\n          preventScrolling.value = true;\n        }\n        this.runLocalHooks('afterSelectionChange', this.getSelectedItem());\n      },\n      beforeOnCellMouseUp: event => {\n        if (this.hasSelectedItem()) {\n          shouldAutoCloseMenu = !this.isCommandPassive(this.getSelectedItem());\n          this.executeCommand(event);\n        }\n      },\n      afterOnCellMouseUp: event => {\n        // If the code runs on the other platform than Windows, the \"mouseup\" is triggered\n        // after the \"contextmenu\". So then \"mouseup\" closes the menu. Otherwise, the closing\n        // menu responsibility is forwarded to \"afterOnCellContextMenu\" callback (#6507#issuecomment-582392301).\n        if ((!isWindowsOS() || !isRightClick(event)) && shouldAutoCloseMenu && this.hasSelectedItem()) {\n          // The timeout is necessary only for mobile devices. For desktop, the click event that is fired\n          // right after the mouseup event gets the event element target the same as the mouseup event.\n          // For mobile devices, the click event is triggered with native delay (~300ms), so when the mouseup\n          // event hides the tapped element, the click event grabs the element below. As a result, the filter\n          // by condition menu is closed and immediately open on tapping the \"None\" item.\n          if (isMobileBrowser() || isIpadOS()) {\n            this.hot._registerTimeout(() => this.close(true), 325);\n          } else {\n            this.close(true);\n          }\n        }\n      },\n      afterUnlisten: () => {\n        // Restore menu focus, fix for `this.instance.unlisten();` call in the tableView.js@260 file.\n        // This prevents losing table responsiveness for keyboard events when filter select menu is closed (#6497).\n        if (!this.hasSelectedItem() && this.isOpened()) {\n          this.hotMenu.listen();\n        }\n      }\n    };\n    this.origOutsideClickDeselects = this.hot.getSettings().outsideClickDeselects;\n    this.hot.getSettings().outsideClickDeselects = false;\n    this.hotMenu = new this.hot.constructor(this.container, settings);\n    this.hotMenu.addHook('afterInit', () => this.onAfterInit());\n    this.hotMenu.init();\n    _classPrivateFieldSet(_navigator, this, createMenuNavigator(this.hotMenu));\n    _classPrivateFieldSet(_shortcutsCtrl, this, createKeyboardShortcutsCtrl(this));\n    _classPrivateFieldGet(_shortcutsCtrl, this).listen();\n    this.focus();\n    if (this.isSubMenu()) {\n      this.addLocalHook('afterOpen', () => this.parentMenu.runLocalHooks('afterSubmenuOpen', this));\n    }\n    this.runLocalHooks('afterOpen', this);\n  }\n\n  /**\n   * Close menu.\n   *\n   * @param {boolean} [closeParent=false] If `true` try to close parent menu if exists.\n   */\n  close() {\n    let closeParent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (!this.isOpened()) {\n      return;\n    }\n    if (closeParent && this.isSubMenu()) {\n      this.parentMenu.close();\n    } else {\n      _classPrivateFieldGet(_navigator, this).clear();\n      this.closeAllSubMenus();\n      this.container.style.display = 'none';\n      this.hotMenu.destroy();\n      this.hotMenu = null;\n      this.hot.getSettings().outsideClickDeselects = this.origOutsideClickDeselects;\n      this.runLocalHooks('afterClose');\n      if (this.isSubMenu()) {\n        if (this.hot.getSettings().ariaTags) {\n          const selection = this.parentMenu.hotMenu.getSelectedLast();\n          if (selection) {\n            const cell = this.parentMenu.hotMenu.getCell(selection[0], 0);\n            setAttribute(cell, [A11Y_EXPANDED(false)]);\n          }\n        }\n        this.parentMenu.hotMenu.listen();\n      }\n    }\n  }\n\n  /**\n   * Open sub menu at the provided row index.\n   *\n   * @param {number} row Row index.\n   * @returns {Menu|boolean} Returns created menu or `false` if no one menu was created.\n   */\n  openSubMenu(row) {\n    if (!this.hotMenu) {\n      return false;\n    }\n    const cell = this.hotMenu.getCell(row, 0);\n    this.closeAllSubMenus();\n    if (!cell || !hasSubMenu(cell)) {\n      return false;\n    }\n    const dataItem = this.hotMenu.getSourceDataAtRow(row);\n    const subMenu = new Menu(this.hot, {\n      parent: this,\n      name: dataItem.name,\n      className: this.options.className,\n      keepInViewport: true,\n      container: this.options.container\n    });\n    subMenu.setMenuItems(dataItem.submenu.items);\n    subMenu.open();\n    subMenu.setPosition(cell.getBoundingClientRect());\n    this.hotSubMenus[dataItem.key] = subMenu;\n\n    // Update the accessibility tags on the cell being the base for the submenu.\n    if (this.hot.getSettings().ariaTags) {\n      setAttribute(cell, [A11Y_EXPANDED(true)]);\n    }\n    return subMenu;\n  }\n\n  /**\n   * Close sub menu at row index.\n   *\n   * @param {number} row Row index.\n   */\n  closeSubMenu(row) {\n    const dataItem = this.hotMenu.getSourceDataAtRow(row);\n    const menus = this.hotSubMenus[dataItem.key];\n    if (menus) {\n      menus.destroy();\n      delete this.hotSubMenus[dataItem.key];\n      const cell = this.hotMenu.getCell(row, 0);\n\n      // Update the accessibility tags on the cell being the base for the submenu.\n      if (this.hot.getSettings().ariaTags) {\n        setAttribute(cell, [A11Y_EXPANDED(false)]);\n      }\n    }\n  }\n\n  /**\n   * Close all opened sub menus.\n   */\n  closeAllSubMenus() {\n    arrayEach(this.hotMenu.getData(), (value, row) => this.closeSubMenu(row));\n  }\n\n  /**\n   * Checks if all created and opened sub menus are closed.\n   *\n   * @returns {boolean}\n   */\n  isAllSubMenusClosed() {\n    return Object.keys(this.hotSubMenus).length === 0;\n  }\n\n  /**\n   * Focus the menu so all keyboard shortcuts become active.\n   */\n  focus() {\n    if (this.isOpened()) {\n      this.hotMenu.rootElement.focus({\n        preventScroll: true\n      });\n      this.getKeyboardShortcutsCtrl().listen();\n      this.hotMenu.listen();\n    }\n  }\n\n  /**\n   * Destroy instance.\n   */\n  destroy() {\n    const menuContainerParentElement = this.container.parentNode;\n    this.clearLocalHooks();\n    this.close();\n    this.parentMenu = null;\n    this.eventManager.destroy();\n    if (menuContainerParentElement) {\n      menuContainerParentElement.removeChild(this.container);\n    }\n  }\n\n  /**\n   * Checks if menu was opened.\n   *\n   * @returns {boolean} Returns `true` if menu was opened.\n   */\n  isOpened() {\n    return this.hotMenu !== null;\n  }\n\n  /**\n   * Execute menu command.\n   *\n   * The `executeCommand()` method works only for selected cells.\n   *\n   * When no cells are selected, `executeCommand()` doesn't do anything.\n   *\n   * @param {Event} [event] The mouse event object.\n   */\n  executeCommand(event) {\n    if (!this.isOpened() || !this.hasSelectedItem()) {\n      return;\n    }\n    const selectedItem = this.getSelectedItem();\n    this.runLocalHooks('select', selectedItem, event);\n    if (this.isCommandPassive(selectedItem)) {\n      return;\n    }\n    const selRanges = this.hot.getSelectedRange();\n    const normalizedSelection = selRanges ? normalizeSelection(selRanges) : [];\n    this.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n    if (this.isSubMenu()) {\n      this.parentMenu.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n    }\n  }\n\n  /**\n   * Checks if the passed command is passive or not. The command is passive when it's marked as\n   * disabled, the descriptor object contains `isCommand` property set to `false`, command\n   * is a separator, or the item is recognized as submenu. For passive items the menu is not\n   * closed automatically after the user trigger the command through the UI.\n   *\n   * @param {object} commandDescriptor Selected menu item from the menu data source.\n   * @returns {boolean}\n   */\n  isCommandPassive(commandDescriptor) {\n    return commandDescriptor.isCommand === false || isItemSeparator(commandDescriptor) || isItemDisabled(commandDescriptor, this.hot) || isItemSubMenu(commandDescriptor);\n  }\n\n  /**\n   * Set offset menu position for specified area (`above`, `below`, `left` or `right`).\n   *\n   * @param {string} area Specified area name (`above`, `below`, `left` or `right`).\n   * @param {number} offset Offset value.\n   */\n  setOffset(area) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.positioner.setOffset(area, offset);\n  }\n\n  /**\n   * Set menu position based on dom event or based on literal object.\n   *\n   * @param {Event|object} coords Event or literal Object with coordinates.\n   */\n  setPosition(coords) {\n    if (this.isSubMenu()) {\n      this.positioner.setParentElement(this.parentMenu.container);\n    }\n    this.positioner.setElement(this.container).updatePosition(coords);\n  }\n\n  /**\n   * Updates the dimensions of the menu based on its content.\n   * This method calculates the real height of the menu by summing up the heights of its items,\n   * and adjusts the width and height of the menu's holder and hider elements accordingly.\n   */\n  updateMenuDimensions() {\n    const {\n      wtTable\n    } = this.hotMenu.view._wt;\n    const data = this.hotMenu.getSettings().data;\n    const hiderStyle = wtTable.hider.style;\n    const holderStyle = wtTable.holder.style;\n    const currentHiderWidth = parseInt(hiderStyle.width, 10);\n    const realHeight = arrayReduce(data, (accumulator, value, index) => {\n      const itemCell = this.hotMenu.getCell(index, 0);\n      const currentRowHeight = itemCell ? outerHeight(this.hotMenu.getCell(index, 0)) : 0;\n      return accumulator + (value.name === SEPARATOR ? 1 : currentRowHeight);\n    }, 0);\n\n    // Additional 3px to menu's size because of additional border around its `table.htCore`.\n    holderStyle.width = `${currentHiderWidth + 3}px`;\n    holderStyle.height = `${realHeight + 3}px`;\n    hiderStyle.height = holderStyle.height;\n  }\n\n  /**\n   * Create container/wrapper for handsontable.\n   *\n   * @private\n   * @param {string} [name] Class name.\n   * @returns {HTMLElement}\n   */\n  createContainer() {\n    let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    const doc = this.options.container.ownerDocument;\n    let className = name;\n    let container;\n    if (className) {\n      if (isFunction(className)) {\n        className = className.call(this.hot);\n        if (className === null || isUndefined(className)) {\n          className = '';\n        } else {\n          className = className.toString();\n        }\n      }\n      className = className.replace(/[^A-z0-9]/g, '_');\n      className = `${this.options.className}Sub_${className}`;\n      container = doc.querySelector(`.${this.options.className}.${className}`);\n    }\n    if (!container) {\n      container = doc.createElement('div');\n      addClass(container, `htMenu ${this.options.className}`);\n      if (className) {\n        addClass(container, className);\n      }\n      this.options.container.appendChild(container);\n    }\n    return container;\n  }\n\n  /**\n   * On after init listener.\n   *\n   * @private\n   */\n  onAfterInit() {\n    this.updateMenuDimensions();\n\n    // Replace the default accessibility tags with the context menu's\n    if (this.hot.getSettings().ariaTags) {\n      setAttribute(this.hotMenu.rootElement, [A11Y_MENU(), A11Y_TABINDEX(-1)]);\n    }\n  }\n\n  /**\n   * Document mouse down listener.\n   *\n   * @private\n   * @param {Event} event The mouse event object.\n   */\n  onDocumentMouseDown(event) {\n    if (!this.isOpened()) {\n      return;\n    }\n\n    // Close menu when clicked element is not belongs to menu itself\n    if (this.options.standalone && this.hotMenu && !isChildOf(event.target, this.hotMenu.rootElement)) {\n      this.close(true);\n\n      // Automatically close menu when clicked element is not belongs to menu or submenu (not necessarily to itself)\n    } else if ((this.isAllSubMenusClosed() || this.isSubMenu()) && !isChildOf(event.target, '.htMenu')) {\n      this.close(true);\n    }\n  }\n\n  /**\n   * Document's contextmenu listener.\n   *\n   * @private\n   * @param {MouseEvent} event The mouse event object.\n   */\n  onDocumentContextMenu(event) {\n    if (!this.isOpened()) {\n      return;\n    }\n    if (hasClass(event.target, 'htCore') && isChildOf(event.target, this.hotMenu.rootElement)) {\n      event.preventDefault();\n    }\n  }\n}\nmixin(Menu, localHooks);","map":{"version":3,"names":["_classPrivateFieldInitSpec","e","t","a","_checkPrivateRedeclaration","set","has","TypeError","_defineProperty","r","_toPropertyKey","Object","defineProperty","value","enumerable","configurable","writable","i","_toPrimitive","Symbol","toPrimitive","call","String","Number","_classPrivateFieldSet","s","_assertClassBrand","_classPrivateFieldGet","get","n","arguments","length","Positioner","createMenuNavigator","createKeyboardShortcutsCtrl","SEPARATOR","NO_ITEMS","predefinedItems","filterSeparators","hasSubMenu","isItemHidden","normalizeSelection","isItemSubMenu","isItemDisabled","isItemSeparator","EventManager","arrayEach","arrayFilter","arrayReduce","isWindowsOS","isMobileBrowser","isIpadOS","addClass","isChildOf","getComputedStyle","getParentWindow","hasClass","setAttribute","outerHeight","isRightClick","debounce","isFunction","isUndefined","isDefined","mixin","localHooks","createMenuItemRenderer","A11Y_EXPANDED","A11Y_MENU","A11Y_TABINDEX","MIN_WIDTH","_navigator","WeakMap","_shortcutsCtrl","_tableBorderWidth","Menu","tableBorderWidth","undefined","hotMenu","parseInt","view","_wt","wtTable","TABLE","borderWidth","constructor","hotInstance","options","_this","hot","parent","name","className","keepInViewport","standalone","minWidth","container","rootDocument","documentElement","createContainer","positioner","parentMenu","registerEvents","isSubMenu","addLocalHook","_len","args","Array","_key","runLocalHooks","frame","rootWindow","eventManager","addEventListener","document","event","onDocumentMouseDown","onDocumentContextMenu","setMenuItems","menuItems","getNavigator","getKeyboardShortcutsCtrl","getSelectedItem","hasSelectedItem","getSourceDataAtRow","getSelectedLast","isArray","open","removeAttribute","style","display","delayedOpenSubMenu","row","openSubMenu","minWidthOfMenu","noItemsDefined","filteredItems","item","key","push","shouldAutoCloseMenu","settings","data","colHeaders","autoColumnSize","autoWrapRow","modifyColWidth","width","autoRowSize","readOnly","editor","copyPaste","hiddenRows","maxCols","columns","renderer","renderAllRows","fragmentSelection","outsideClickDeselects","disableVisualSelection","layoutDirection","isRtl","ariaTags","beforeOnCellMouseOver","coords","setCurrentPage","afterOnCellMouseOver","isAllSubMenusClosed","rowHeights","afterOnCellContextMenu","preventDefault","close","afterSelection","column","row2","column2","preventScrolling","isMouseDown","beforeOnCellMouseUp","isCommandPassive","executeCommand","afterOnCellMouseUp","_registerTimeout","afterUnlisten","isOpened","listen","origOutsideClickDeselects","getSettings","addHook","onAfterInit","init","focus","closeParent","clear","closeAllSubMenus","destroy","selection","cell","getCell","dataItem","subMenu","submenu","items","setPosition","getBoundingClientRect","hotSubMenus","closeSubMenu","menus","getData","keys","rootElement","preventScroll","menuContainerParentElement","parentNode","clearLocalHooks","removeChild","selectedItem","selRanges","getSelectedRange","normalizedSelection","commandDescriptor","isCommand","setOffset","area","offset","setParentElement","setElement","updatePosition","updateMenuDimensions","hiderStyle","hider","holderStyle","holder","currentHiderWidth","realHeight","accumulator","index","itemCell","currentRowHeight","height","doc","ownerDocument","toString","replace","querySelector","createElement","appendChild","target"],"sources":["/Users/priyadeliwala/node_modules/handsontable/plugins/contextMenu/menu/menu.mjs"],"sourcesContent":["import \"core-js/modules/es.error.cause.js\";\nimport \"core-js/modules/es.array.push.js\";\nfunction _classPrivateFieldInitSpec(e, t, a) { _checkPrivateRedeclaration(e, t), t.set(e, a); }\nfunction _checkPrivateRedeclaration(e, t) { if (t.has(e)) throw new TypeError(\"Cannot initialize the same private elements twice on an object\"); }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classPrivateFieldSet(s, a, r) { return s.set(_assertClassBrand(s, a), r), r; }\nfunction _classPrivateFieldGet(s, a) { return s.get(_assertClassBrand(s, a)); }\nfunction _assertClassBrand(e, t, n) { if (\"function\" == typeof e ? e === t : e.has(t)) return arguments.length < 3 ? t : n; throw new TypeError(\"Private element is not present on this object\"); }\nimport { Positioner } from \"./positioner.mjs\";\nimport { createMenuNavigator } from \"./navigator.mjs\";\nimport { createKeyboardShortcutsCtrl } from \"./shortcuts.mjs\";\nimport { SEPARATOR, NO_ITEMS, predefinedItems } from \"./../predefinedItems/index.mjs\";\nimport { filterSeparators, hasSubMenu, isItemHidden, normalizeSelection, isItemSubMenu, isItemDisabled, isItemSeparator } from \"./utils.mjs\";\nimport EventManager from \"../../../eventManager.mjs\";\nimport { arrayEach, arrayFilter, arrayReduce } from \"../../../helpers/array.mjs\";\nimport { isWindowsOS, isMobileBrowser, isIpadOS } from \"../../../helpers/browser.mjs\";\nimport { addClass, isChildOf, getComputedStyle, getParentWindow, hasClass, setAttribute, outerHeight } from \"../../../helpers/dom/element.mjs\";\nimport { isRightClick } from \"../../../helpers/dom/event.mjs\";\nimport { debounce, isFunction } from \"../../../helpers/function.mjs\";\nimport { isUndefined, isDefined } from \"../../../helpers/mixed.mjs\";\nimport { mixin } from \"../../../helpers/object.mjs\";\nimport localHooks from \"../../../mixins/localHooks.mjs\";\nimport { createMenuItemRenderer } from \"./menuItemRenderer.mjs\";\nimport { A11Y_EXPANDED, A11Y_MENU, A11Y_TABINDEX } from \"../../../helpers/a11y.mjs\";\nconst MIN_WIDTH = 215;\n\n/**\n * @typedef MenuOptions\n * @property {Menu} [parent=null] Instance of {@link Menu}.\n * @property {string} [name=null] Name of the menu.\n * @property {string} [className=''] Custom class name.\n * @property {boolean} [keepInViewport=true] Determine if should be kept in viewport.\n * @property {boolean} [standalone] Enabling closing menu when clicked element is not belongs to menu itself.\n * @property {number} [minWidth=MIN_WIDTH] The minimum width.\n * @property {HTMLElement} [container] The container.\n */\n\n/**\n * @private\n * @class Menu\n */\nvar _navigator = /*#__PURE__*/new WeakMap();\nvar _shortcutsCtrl = /*#__PURE__*/new WeakMap();\nvar _tableBorderWidth = /*#__PURE__*/new WeakMap();\nexport class Menu {\n  /**\n   * Getter for the table border width.\n   * This getter retrieves the border width of the table used in the menu.\n   *\n   * @returns {number} The border width of the table in pixels.\n   */\n  get tableBorderWidth() {\n    if (_classPrivateFieldGet(_tableBorderWidth, this) === undefined && this.hotMenu) {\n      _classPrivateFieldSet(_tableBorderWidth, this, parseInt(getComputedStyle(this.hotMenu.view._wt.wtTable.TABLE).borderWidth, 10));\n    }\n    return _classPrivateFieldGet(_tableBorderWidth, this);\n  }\n\n  /**\n   * @param {Core} hotInstance Handsontable instance.\n   * @param {MenuOptions} [options] Menu options.\n   */\n  constructor(hotInstance, options) {\n    var _this = this;\n    /**\n     * The Handsontable instance.\n     *\n     * @type {Core}\n     */\n    _defineProperty(this, \"hot\", void 0);\n    /**\n     * The Menu options.\n     *\n     * @type {object}\n     */\n    _defineProperty(this, \"options\", void 0);\n    /**\n     * @type {EventManager}\n     */\n    _defineProperty(this, \"eventManager\", new EventManager(this));\n    /**\n     * The Menu container element.\n     *\n     * @type {HTMLElement}\n     */\n    _defineProperty(this, \"container\", void 0);\n    /**\n     * @type {Positioner}\n     */\n    _defineProperty(this, \"positioner\", void 0);\n    /**\n     * The instance of the Handsontable that is used as a menu.\n     *\n     * @type {Core}\n     */\n    _defineProperty(this, \"hotMenu\", null);\n    /**\n     * The collection of the Handsontable instances that are used as sub-menus.\n     *\n     * @type {object}\n     */\n    _defineProperty(this, \"hotSubMenus\", {});\n    /**\n     * If the menu acts as the sub-menu then this property contains the reference to the parent menu.\n     *\n     * @type {Menu}\n     */\n    _defineProperty(this, \"parentMenu\", void 0);\n    /**\n     * The menu items entries.\n     *\n     * @type {object[]}\n     */\n    _defineProperty(this, \"menuItems\", null);\n    /**\n     * @type {boolean}\n     */\n    _defineProperty(this, \"origOutsideClickDeselects\", null);\n    /**\n     * The controller module that allows modifying the menu item selection positions.\n     *\n     * @type {Paginator}\n     */\n    _classPrivateFieldInitSpec(this, _navigator, void 0);\n    /**\n     * The controller module that allows extending the keyboard shortcuts for the menu.\n     *\n     * @type {KeyboardShortcutsMenuController}\n     */\n    _classPrivateFieldInitSpec(this, _shortcutsCtrl, void 0);\n    /**\n     * The border width of the table used in the menu.\n     *\n     * @type {number}\n     */\n    _classPrivateFieldInitSpec(this, _tableBorderWidth, void 0);\n    this.hot = hotInstance;\n    this.options = options || {\n      parent: null,\n      name: null,\n      className: '',\n      keepInViewport: true,\n      standalone: false,\n      minWidth: MIN_WIDTH,\n      container: this.hot.rootDocument.documentElement\n    };\n    this.container = this.createContainer(this.options.name);\n    this.positioner = new Positioner(this.options.keepInViewport);\n    this.parentMenu = this.options.parent || null;\n    this.registerEvents();\n    if (this.isSubMenu()) {\n      this.addLocalHook('afterSelectionChange', function () {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        return _this.parentMenu.runLocalHooks('afterSelectionChange', ...args);\n      });\n    }\n  }\n\n  /**\n   * Register event listeners.\n   *\n   * @private\n   */\n  registerEvents() {\n    let frame = this.hot.rootWindow;\n    while (frame) {\n      this.eventManager.addEventListener(frame.document, 'mousedown', event => this.onDocumentMouseDown(event));\n      this.eventManager.addEventListener(frame.document, 'touchstart', event => this.onDocumentMouseDown(event));\n      this.eventManager.addEventListener(frame.document, 'contextmenu', event => this.onDocumentContextMenu(event));\n      frame = getParentWindow(frame);\n    }\n  }\n\n  /**\n   * Set array of objects which defines menu items.\n   *\n   * @param {Array} menuItems Menu items to display.\n   */\n  setMenuItems(menuItems) {\n    this.menuItems = menuItems;\n  }\n\n  /**\n   * Gets the controller object that allows modifying the the menu item selection.\n   *\n   * @returns {Paginator | undefined}\n   */\n  getNavigator() {\n    return _classPrivateFieldGet(_navigator, this);\n  }\n\n  /**\n   * Gets the controller object that allows extending the keyboard shortcuts of the menu.\n   *\n   * @returns {KeyboardShortcutsMenuController | undefined}\n   */\n  getKeyboardShortcutsCtrl() {\n    return _classPrivateFieldGet(_shortcutsCtrl, this);\n  }\n\n  /**\n   * Returns currently selected menu item. Returns `null` if no item was selected.\n   *\n   * @returns {object|null}\n   */\n  getSelectedItem() {\n    return this.hasSelectedItem() ? this.hotMenu.getSourceDataAtRow(this.hotMenu.getSelectedLast()[0]) : null;\n  }\n\n  /**\n   * Checks if the menu has selected (highlighted) any item from the menu list.\n   *\n   * @returns {boolean}\n   */\n  hasSelectedItem() {\n    return Array.isArray(this.hotMenu.getSelectedLast());\n  }\n\n  /**\n   * Check if menu is using as sub-menu.\n   *\n   * @returns {boolean}\n   */\n  isSubMenu() {\n    return this.parentMenu !== null;\n  }\n\n  /**\n   * Open menu.\n   *\n   * @fires Hooks#beforeContextMenuShow\n   * @fires Hooks#afterContextMenuShow\n   */\n  open() {\n    this.runLocalHooks('beforeOpen');\n    this.container.removeAttribute('style');\n    this.container.style.display = 'block';\n    const delayedOpenSubMenu = debounce(row => this.openSubMenu(row), 300);\n    const minWidthOfMenu = this.options.minWidth || MIN_WIDTH;\n    let noItemsDefined = false;\n    let filteredItems = arrayFilter(this.menuItems, item => {\n      if (item.key === NO_ITEMS) {\n        noItemsDefined = true;\n      }\n      return isItemHidden(item, this.hot);\n    });\n    if (filteredItems.length < 1 && !noItemsDefined) {\n      filteredItems.push(predefinedItems()[NO_ITEMS]);\n    } else if (filteredItems.length === 0) {\n      return;\n    }\n    filteredItems = filterSeparators(filteredItems, SEPARATOR);\n    let shouldAutoCloseMenu = false;\n    const settings = {\n      data: filteredItems,\n      colHeaders: false,\n      autoColumnSize: true,\n      autoWrapRow: false,\n      modifyColWidth(width) {\n        if (isDefined(width) && width < minWidthOfMenu) {\n          return minWidthOfMenu;\n        }\n        return width;\n      },\n      autoRowSize: false,\n      readOnly: true,\n      editor: false,\n      copyPaste: false,\n      hiddenRows: true,\n      maxCols: 1,\n      columns: [{\n        data: 'name',\n        renderer: createMenuItemRenderer(this.hot)\n      }],\n      renderAllRows: true,\n      fragmentSelection: false,\n      outsideClickDeselects: false,\n      disableVisualSelection: 'area',\n      layoutDirection: this.hot.isRtl() ? 'rtl' : 'ltr',\n      ariaTags: false,\n      beforeOnCellMouseOver: (event, coords) => {\n        _classPrivateFieldGet(_navigator, this).setCurrentPage(coords.row);\n      },\n      afterOnCellMouseOver: (event, coords) => {\n        if (this.isAllSubMenusClosed()) {\n          delayedOpenSubMenu(coords.row);\n        } else {\n          this.openSubMenu(coords.row);\n        }\n      },\n      rowHeights: row => filteredItems[row].name === SEPARATOR ? 1 : undefined,\n      afterOnCellContextMenu: event => {\n        event.preventDefault();\n\n        // On the Windows platform, the \"contextmenu\" is triggered after the \"mouseup\" so that's\n        // why the closing menu is here. (#6507#issuecomment-582392301).\n        if (isWindowsOS() && shouldAutoCloseMenu && this.hasSelectedItem()) {\n          this.close(true);\n        }\n      },\n      afterSelection: (row, column, row2, column2, preventScrolling) => {\n        // do not scroll the viewport when mouse clicks on partially visible menu item\n        if (this.hotMenu.view.isMouseDown()) {\n          preventScrolling.value = true;\n        }\n        this.runLocalHooks('afterSelectionChange', this.getSelectedItem());\n      },\n      beforeOnCellMouseUp: event => {\n        if (this.hasSelectedItem()) {\n          shouldAutoCloseMenu = !this.isCommandPassive(this.getSelectedItem());\n          this.executeCommand(event);\n        }\n      },\n      afterOnCellMouseUp: event => {\n        // If the code runs on the other platform than Windows, the \"mouseup\" is triggered\n        // after the \"contextmenu\". So then \"mouseup\" closes the menu. Otherwise, the closing\n        // menu responsibility is forwarded to \"afterOnCellContextMenu\" callback (#6507#issuecomment-582392301).\n        if ((!isWindowsOS() || !isRightClick(event)) && shouldAutoCloseMenu && this.hasSelectedItem()) {\n          // The timeout is necessary only for mobile devices. For desktop, the click event that is fired\n          // right after the mouseup event gets the event element target the same as the mouseup event.\n          // For mobile devices, the click event is triggered with native delay (~300ms), so when the mouseup\n          // event hides the tapped element, the click event grabs the element below. As a result, the filter\n          // by condition menu is closed and immediately open on tapping the \"None\" item.\n          if (isMobileBrowser() || isIpadOS()) {\n            this.hot._registerTimeout(() => this.close(true), 325);\n          } else {\n            this.close(true);\n          }\n        }\n      },\n      afterUnlisten: () => {\n        // Restore menu focus, fix for `this.instance.unlisten();` call in the tableView.js@260 file.\n        // This prevents losing table responsiveness for keyboard events when filter select menu is closed (#6497).\n        if (!this.hasSelectedItem() && this.isOpened()) {\n          this.hotMenu.listen();\n        }\n      }\n    };\n    this.origOutsideClickDeselects = this.hot.getSettings().outsideClickDeselects;\n    this.hot.getSettings().outsideClickDeselects = false;\n    this.hotMenu = new this.hot.constructor(this.container, settings);\n    this.hotMenu.addHook('afterInit', () => this.onAfterInit());\n    this.hotMenu.init();\n    _classPrivateFieldSet(_navigator, this, createMenuNavigator(this.hotMenu));\n    _classPrivateFieldSet(_shortcutsCtrl, this, createKeyboardShortcutsCtrl(this));\n    _classPrivateFieldGet(_shortcutsCtrl, this).listen();\n    this.focus();\n    if (this.isSubMenu()) {\n      this.addLocalHook('afterOpen', () => this.parentMenu.runLocalHooks('afterSubmenuOpen', this));\n    }\n    this.runLocalHooks('afterOpen', this);\n  }\n\n  /**\n   * Close menu.\n   *\n   * @param {boolean} [closeParent=false] If `true` try to close parent menu if exists.\n   */\n  close() {\n    let closeParent = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (!this.isOpened()) {\n      return;\n    }\n    if (closeParent && this.isSubMenu()) {\n      this.parentMenu.close();\n    } else {\n      _classPrivateFieldGet(_navigator, this).clear();\n      this.closeAllSubMenus();\n      this.container.style.display = 'none';\n      this.hotMenu.destroy();\n      this.hotMenu = null;\n      this.hot.getSettings().outsideClickDeselects = this.origOutsideClickDeselects;\n      this.runLocalHooks('afterClose');\n      if (this.isSubMenu()) {\n        if (this.hot.getSettings().ariaTags) {\n          const selection = this.parentMenu.hotMenu.getSelectedLast();\n          if (selection) {\n            const cell = this.parentMenu.hotMenu.getCell(selection[0], 0);\n            setAttribute(cell, [A11Y_EXPANDED(false)]);\n          }\n        }\n        this.parentMenu.hotMenu.listen();\n      }\n    }\n  }\n\n  /**\n   * Open sub menu at the provided row index.\n   *\n   * @param {number} row Row index.\n   * @returns {Menu|boolean} Returns created menu or `false` if no one menu was created.\n   */\n  openSubMenu(row) {\n    if (!this.hotMenu) {\n      return false;\n    }\n    const cell = this.hotMenu.getCell(row, 0);\n    this.closeAllSubMenus();\n    if (!cell || !hasSubMenu(cell)) {\n      return false;\n    }\n    const dataItem = this.hotMenu.getSourceDataAtRow(row);\n    const subMenu = new Menu(this.hot, {\n      parent: this,\n      name: dataItem.name,\n      className: this.options.className,\n      keepInViewport: true,\n      container: this.options.container\n    });\n    subMenu.setMenuItems(dataItem.submenu.items);\n    subMenu.open();\n    subMenu.setPosition(cell.getBoundingClientRect());\n    this.hotSubMenus[dataItem.key] = subMenu;\n\n    // Update the accessibility tags on the cell being the base for the submenu.\n    if (this.hot.getSettings().ariaTags) {\n      setAttribute(cell, [A11Y_EXPANDED(true)]);\n    }\n    return subMenu;\n  }\n\n  /**\n   * Close sub menu at row index.\n   *\n   * @param {number} row Row index.\n   */\n  closeSubMenu(row) {\n    const dataItem = this.hotMenu.getSourceDataAtRow(row);\n    const menus = this.hotSubMenus[dataItem.key];\n    if (menus) {\n      menus.destroy();\n      delete this.hotSubMenus[dataItem.key];\n      const cell = this.hotMenu.getCell(row, 0);\n\n      // Update the accessibility tags on the cell being the base for the submenu.\n      if (this.hot.getSettings().ariaTags) {\n        setAttribute(cell, [A11Y_EXPANDED(false)]);\n      }\n    }\n  }\n\n  /**\n   * Close all opened sub menus.\n   */\n  closeAllSubMenus() {\n    arrayEach(this.hotMenu.getData(), (value, row) => this.closeSubMenu(row));\n  }\n\n  /**\n   * Checks if all created and opened sub menus are closed.\n   *\n   * @returns {boolean}\n   */\n  isAllSubMenusClosed() {\n    return Object.keys(this.hotSubMenus).length === 0;\n  }\n\n  /**\n   * Focus the menu so all keyboard shortcuts become active.\n   */\n  focus() {\n    if (this.isOpened()) {\n      this.hotMenu.rootElement.focus({\n        preventScroll: true\n      });\n      this.getKeyboardShortcutsCtrl().listen();\n      this.hotMenu.listen();\n    }\n  }\n\n  /**\n   * Destroy instance.\n   */\n  destroy() {\n    const menuContainerParentElement = this.container.parentNode;\n    this.clearLocalHooks();\n    this.close();\n    this.parentMenu = null;\n    this.eventManager.destroy();\n    if (menuContainerParentElement) {\n      menuContainerParentElement.removeChild(this.container);\n    }\n  }\n\n  /**\n   * Checks if menu was opened.\n   *\n   * @returns {boolean} Returns `true` if menu was opened.\n   */\n  isOpened() {\n    return this.hotMenu !== null;\n  }\n\n  /**\n   * Execute menu command.\n   *\n   * The `executeCommand()` method works only for selected cells.\n   *\n   * When no cells are selected, `executeCommand()` doesn't do anything.\n   *\n   * @param {Event} [event] The mouse event object.\n   */\n  executeCommand(event) {\n    if (!this.isOpened() || !this.hasSelectedItem()) {\n      return;\n    }\n    const selectedItem = this.getSelectedItem();\n    this.runLocalHooks('select', selectedItem, event);\n    if (this.isCommandPassive(selectedItem)) {\n      return;\n    }\n    const selRanges = this.hot.getSelectedRange();\n    const normalizedSelection = selRanges ? normalizeSelection(selRanges) : [];\n    this.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n    if (this.isSubMenu()) {\n      this.parentMenu.runLocalHooks('executeCommand', selectedItem.key, normalizedSelection, event);\n    }\n  }\n\n  /**\n   * Checks if the passed command is passive or not. The command is passive when it's marked as\n   * disabled, the descriptor object contains `isCommand` property set to `false`, command\n   * is a separator, or the item is recognized as submenu. For passive items the menu is not\n   * closed automatically after the user trigger the command through the UI.\n   *\n   * @param {object} commandDescriptor Selected menu item from the menu data source.\n   * @returns {boolean}\n   */\n  isCommandPassive(commandDescriptor) {\n    return commandDescriptor.isCommand === false || isItemSeparator(commandDescriptor) || isItemDisabled(commandDescriptor, this.hot) || isItemSubMenu(commandDescriptor);\n  }\n\n  /**\n   * Set offset menu position for specified area (`above`, `below`, `left` or `right`).\n   *\n   * @param {string} area Specified area name (`above`, `below`, `left` or `right`).\n   * @param {number} offset Offset value.\n   */\n  setOffset(area) {\n    let offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.positioner.setOffset(area, offset);\n  }\n\n  /**\n   * Set menu position based on dom event or based on literal object.\n   *\n   * @param {Event|object} coords Event or literal Object with coordinates.\n   */\n  setPosition(coords) {\n    if (this.isSubMenu()) {\n      this.positioner.setParentElement(this.parentMenu.container);\n    }\n    this.positioner.setElement(this.container).updatePosition(coords);\n  }\n\n  /**\n   * Updates the dimensions of the menu based on its content.\n   * This method calculates the real height of the menu by summing up the heights of its items,\n   * and adjusts the width and height of the menu's holder and hider elements accordingly.\n   */\n  updateMenuDimensions() {\n    const {\n      wtTable\n    } = this.hotMenu.view._wt;\n    const data = this.hotMenu.getSettings().data;\n    const hiderStyle = wtTable.hider.style;\n    const holderStyle = wtTable.holder.style;\n    const currentHiderWidth = parseInt(hiderStyle.width, 10);\n    const realHeight = arrayReduce(data, (accumulator, value, index) => {\n      const itemCell = this.hotMenu.getCell(index, 0);\n      const currentRowHeight = itemCell ? outerHeight(this.hotMenu.getCell(index, 0)) : 0;\n      return accumulator + (value.name === SEPARATOR ? 1 : currentRowHeight);\n    }, 0);\n\n    // Additional 3px to menu's size because of additional border around its `table.htCore`.\n    holderStyle.width = `${currentHiderWidth + 3}px`;\n    holderStyle.height = `${realHeight + 3}px`;\n    hiderStyle.height = holderStyle.height;\n  }\n\n  /**\n   * Create container/wrapper for handsontable.\n   *\n   * @private\n   * @param {string} [name] Class name.\n   * @returns {HTMLElement}\n   */\n  createContainer() {\n    let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    const doc = this.options.container.ownerDocument;\n    let className = name;\n    let container;\n    if (className) {\n      if (isFunction(className)) {\n        className = className.call(this.hot);\n        if (className === null || isUndefined(className)) {\n          className = '';\n        } else {\n          className = className.toString();\n        }\n      }\n      className = className.replace(/[^A-z0-9]/g, '_');\n      className = `${this.options.className}Sub_${className}`;\n      container = doc.querySelector(`.${this.options.className}.${className}`);\n    }\n    if (!container) {\n      container = doc.createElement('div');\n      addClass(container, `htMenu ${this.options.className}`);\n      if (className) {\n        addClass(container, className);\n      }\n      this.options.container.appendChild(container);\n    }\n    return container;\n  }\n\n  /**\n   * On after init listener.\n   *\n   * @private\n   */\n  onAfterInit() {\n    this.updateMenuDimensions();\n\n    // Replace the default accessibility tags with the context menu's\n    if (this.hot.getSettings().ariaTags) {\n      setAttribute(this.hotMenu.rootElement, [A11Y_MENU(), A11Y_TABINDEX(-1)]);\n    }\n  }\n\n  /**\n   * Document mouse down listener.\n   *\n   * @private\n   * @param {Event} event The mouse event object.\n   */\n  onDocumentMouseDown(event) {\n    if (!this.isOpened()) {\n      return;\n    }\n\n    // Close menu when clicked element is not belongs to menu itself\n    if (this.options.standalone && this.hotMenu && !isChildOf(event.target, this.hotMenu.rootElement)) {\n      this.close(true);\n\n      // Automatically close menu when clicked element is not belongs to menu or submenu (not necessarily to itself)\n    } else if ((this.isAllSubMenusClosed() || this.isSubMenu()) && !isChildOf(event.target, '.htMenu')) {\n      this.close(true);\n    }\n  }\n\n  /**\n   * Document's contextmenu listener.\n   *\n   * @private\n   * @param {MouseEvent} event The mouse event object.\n   */\n  onDocumentContextMenu(event) {\n    if (!this.isOpened()) {\n      return;\n    }\n    if (hasClass(event.target, 'htCore') && isChildOf(event.target, this.hotMenu.rootElement)) {\n      event.preventDefault();\n    }\n  }\n}\nmixin(Menu, localHooks);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}